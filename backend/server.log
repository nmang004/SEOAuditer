
> seo-director-backend@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 23:25:41 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.8.3)
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:25:42.556 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:25:43.609 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:25:43.609 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:25:43.768 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:25:43.770 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:25:43.779 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:25:43.835 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:25:43.841 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:25:43.841 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:25:43.848 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:25:43.848 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:25:43.855 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:25:43.855 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:25:43.965 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:25:43.966 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
âœ… Server started successfully on port 4000
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 53 (line 1 column 54)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:26:49.998 PM"}
[0mPOST /api/auth/register [33m400[0m 6.969 ms - 395[0m
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 53 (line 1 column 54)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:27:11.730 PM"}
[31m[31merror[31m[39m: 	[31mError verifying email transporter: getaddrinfo ENOTFOUND smtp.example.com[39m {"code":"EDNS","command":"CONN","errno":-3008,"hostname":"smtp.example.com","stack":"Error: getaddrinfo ENOTFOUND smtp.example.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)","syscall":"getaddrinfo","timestamp":"2025-06-02 11:27:29.545 PM"}
[31m[31merror[31m[39m: 	[31mFailed to initialize email service: Failed to initialize email service[39m {"stack":"Error: Failed to initialize email service\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email.service.ts:116:18\n    at SMTPConnection.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-transport/index.js:347:24)\n    at Object.onceWrapper (node:events:633:26)\n    at SMTPConnection.emit (node:events:518:28)\n    at SMTPConnection._onError (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:799:14)\n    at Immediate.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:344:52)\n    at processImmediate (node:internal/timers:485:21)","timestamp":"2025-06-02 11:27:29.552 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service will be disabled[39m {"timestamp":"2025-06-02 11:27:29.553 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:27:29.553 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921249217@example.com","timestamp":"2025-06-02 11:27:29.553 PM","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921249217@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:27:29.567 PM","userAgent":"axios/1.9.0","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921249217@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:27:29.567 PM","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[0mPOST /api/auth/register [32m201[0m 338.268 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:27:29.579 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 8.735 ms - 166[0m
[0mGET /api/health [32m200[0m 0.930 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:32:01.036 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921520790@example.com","timestamp":"2025-06-02 11:32:01.037 PM","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921520790@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:32:01.043 PM","userAgent":"axios/1.9.0","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921520790@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:32:01.043 PM","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[0mPOST /api/auth/register [32m201[0m 251.820 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:32:01.047 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 2.814 ms - 166[0m
[0mPOST /api/auth/register [33m400[0m 0.618 ms - 1332[0m
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 59 (line 1 column 60)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:32:14.688 PM"}

> seo-director-backend@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 23:34:23 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.8.3)
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:34:23.932 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:34:24.898 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:34:24.898 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:34:25.059 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:34:25.059 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:34:25.060 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:34:25.060 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:34:25.062 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:34:25.072 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:34:25.121 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:34:25.125 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:34:25.125 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:34:25.131 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:34:25.131 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:34:25.135 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:34:25.135 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:34:25.247 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:34:25.254 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
âœ… Server started successfully on port 4000
[31m[31merror[31m[39m: 	[31mError verifying email transporter: getaddrinfo ENOTFOUND smtp.example.com[39m {"code":"EDNS","command":"CONN","errno":-3008,"hostname":"smtp.example.com","stack":"Error: getaddrinfo ENOTFOUND smtp.example.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)","syscall":"getaddrinfo","timestamp":"2025-06-02 11:36:39.553 PM"}
[31m[31merror[31m[39m: 	[31mFailed to initialize email service: Failed to initialize email service[39m {"stack":"Error: Failed to initialize email service\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email.service.ts:116:18\n    at SMTPConnection.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-transport/index.js:347:24)\n    at Object.onceWrapper (node:events:633:26)\n    at SMTPConnection.emit (node:events:518:28)\n    at SMTPConnection._onError (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:799:14)\n    at Immediate.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:344:52)\n    at processImmediate (node:internal/timers:485:21)","timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service will be disabled[39m {"timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921799225@example.com","timestamp":"2025-06-02 11:36:39.559 PM","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921799225@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:36:39.564 PM","userAgent":"axios/1.9.0","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921799225@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:36:39.564 PM","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[0mPOST /api/auth/register [32m201[0m 309.208 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:36:39.584 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 16.031 ms - 166[0m
[0mGET /api/health [32m200[0m 0.448 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:36:50.292 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921810054@example.com","timestamp":"2025-06-02 11:36:50.292 PM","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921810054@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:36:50.293 PM","userAgent":"axios/1.9.0","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921810054@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:36:50.293 PM","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[0mPOST /api/auth/register [32m201[0m 238.124 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:36:50.296 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 1.832 ms - 166[0m
[0mPOST /api/auth/register [33m400[0m 1.152 ms - 1332[0m
[0mHEAD /api/health [32m200[0m 2.043 ms - 105[0m
[0mGET /api/health [32m200[0m 0.129 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:44:43.257 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748922282@example.com","timestamp":"2025-06-02 11:44:43.257 PM","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748922282@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:44:43.262 PM","userAgent":"curl/8.7.1","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748922282@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:44:43.263 PM","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[0mPOST /api/auth/register [32m201[0m 602.873 ms - 334[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:45:06.220 PM","userAgent":"curl/8.7.1","userId":null}
[0mPOST /api/auth/login [33m401[0m 35.700 ms - 166[0m
[INFO] 23:50:02 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:02.571 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:02.573 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:02.574 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:02.575 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:02.584 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:02.585 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:02.593 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.596 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:03.596 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:03.598 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.606 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.606 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:03.609 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:03.610 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:04.391 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:05.138 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:05.138 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:05.263 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:05.264 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:05.264 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:05.264 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:05.320 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:05.326 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:05.326 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:05.328 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:05.328 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:05.331 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:05.331 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:05.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:05.444 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:05.444 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
âœ… Server started successfully on port 4000
[INFO] 23:50:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:26.543 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:26.544 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:26.545 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:26.545 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:26.552 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:26.553 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:26.556 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.558 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:27.558 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:27.559 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.578 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.578 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:27.580 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:27.580 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:28.179 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:28.817 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:28.817 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:28.914 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:28.914 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:28.915 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:28.915 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:28.917 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:28.919 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:28.955 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:28.961 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:28.961 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:28.963 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:28.963 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:28.966 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:28.966 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:29.074 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:29.076 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
âœ… Server started successfully on port 4000
[INFO] 23:50:40 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:40.070 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:40.072 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:40.072 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:40.073 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.074 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:41.074 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:41.075 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:41.081 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:41.606 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:42.218 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:42.218 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:42.304 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:42.304 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:42.305 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:42.305 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:42.306 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:42.308 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:42.324 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:42.328 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:42.328 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:42.329 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:42.330 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:42.333 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:42.333 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:42.434 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:42.435 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:42.435 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:42.441 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:42.443 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:42.444 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:08.733 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:14.765 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:41:13.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:41:19.330 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 12:51:12.278 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 12:51:12.279 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 12:51:12.279 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 12:51:12.280 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:01:13.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:01:19.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:14.451 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:20.463 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:21:18.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:21:24.506 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:31:18.064 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:31:24.062 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:41:18.445 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:41:24.447 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 01:51:22.235 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 01:51:22.239 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 01:51:22.240 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 01:51:22.241 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:01:14.531 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:01:20.585 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:31:33.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:31:39.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:41:34.434 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:41:40.436 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 02:51:35.619 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:45.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:45.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:51.606 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:51.606 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:43.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:43.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:49.558 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:49.559 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 03:51:44.901 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 03:51:44.902 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 03:51:44.902 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 03:51:44.903 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:45.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:51.925 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:01:46.663 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:10:25.340 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:10:31.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:21:53.735 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:21:59.749 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:23:20.628 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:23:26.635 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 04:53:50.574 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:53:51.588 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:02:46.508 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:02:52.512 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:20:50.474 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:51:07.049 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:51:12.974 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 05:53:50.555 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[INFO] 06:00:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:00:47.132 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:47.135 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:47.135 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:00:47.136 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:00:47.196 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:00:47.198 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:00:47.205 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.207 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:00:48.208 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:00:48.212 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.222 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.222 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:00:48.226 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:00:48.227 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:00:48.913 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:00:49.648 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:00:49.648 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:00:49.746 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:00:49.746 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:00:49.747 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:00:49.747 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:49.749 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:00:49.750 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:00:49.788 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:00:49.792 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:00:49.792 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:49.794 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:00:49.794 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:00:49.800 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:00:49.800 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:49.908 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:00:49.912 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:42.105 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:42.107 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:48.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:48.102 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:20:07.669 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:20:13.992 AM"}
[INFO] 06:30:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:30:33.092 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:33.096 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:33.096 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:30:33.097 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:30:33.110 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:30:33.111 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:30:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.120 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:30:34.121 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:30:34.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.133 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.133 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:30:34.137 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:30:34.138 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:30:34.818 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:30:35.547 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:30:35.547 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:30:36.078 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:30:36.078 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:30:36.079 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:30:36.079 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:30:36.081 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:30:36.081 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:30:36.126 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:30:36.133 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:30:36.133 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:36.134 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:30:36.134 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:30:36.138 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:30:36.138 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:30:36.247 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:30:36.249 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:45:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:45:10.155 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:10.157 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:10.158 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:45:10.158 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:45:10.166 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:45:10.167 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:45:10.173 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.175 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:45:11.176 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:45:11.177 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.184 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.184 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:45:11.187 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:45:11.188 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:45:11.949 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:45:12.703 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:45:12.703 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:45:12.799 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:45:12.800 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:45:12.801 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:45:12.801 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:12.804 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:45:12.804 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:45:12.841 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:45:12.846 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:45:12.846 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:12.847 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:45:12.847 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:45:12.864 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:45:12.864 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:12.973 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:45:12.979 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:45:12.980 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:45:53 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:45:53.786 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:45:53.789 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:45:53.789 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:45:53.791 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.792 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:45:54.792 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:45:54.793 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.799 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.799 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:45:54.800 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:45:54.800 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:45:55.445 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:45:56.160 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:45:56.161 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:45:56.253 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:45:56.253 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 06:45:56.274 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:45:56.278 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:45:56.278 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:56.279 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:45:56.280 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:45:56.283 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:45:56.283 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:45:56.384 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:45:56.384 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:45:56.386 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:45:56.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:56.391 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:45:56.396 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:00:13.822 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:00:19.777 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:02:42.050 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:02:48.051 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:04:00.207 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:04:06.206 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:06:00.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:06:06.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:09:16.814 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:09:22.793 AM"}
[INFO] 07:24:17 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:24:17.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:17.869 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:17.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:24:17.871 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:24:17.888 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:24:17.889 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:24:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.899 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:24:18.900 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:24:18.903 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.910 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.910 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:24:18.917 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:24:18.920 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:24:19.559 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:24:20.585 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:24:20.585 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:24:20.773 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:24:20.773 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:24:20.782 AM"}
[INFO] 07:24:20 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified
Process exiting with code: 0
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 0[39m {"timestamp":"2025-06-03 07:24:20.829 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:24:21.558 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:24:22.262 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:24:22.262 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:24:22.350 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:24:22.350 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:24:22.351 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:24:22.351 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:24:22.353 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:22.353 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:24:22.425 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:24:22.430 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:24:22.430 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:22.432 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:24:22.432 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:24:22.436 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:24:22.436 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:22.545 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:24:22.547 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:31:01 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:31:01.479 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:31:01.484 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:31:01.485 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:31:01.488 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.491 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:31:02.491 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:31:02.492 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.499 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.499 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:31:02.502 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:31:02.502 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:31:03.237 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:31:03.978 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:31:03.978 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:31:04.080 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:31:04.081 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:31:04.081 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:31:04.081 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:04.083 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:31:04.083 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:31:04.113 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:31:04.122 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:31:04.122 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:04.123 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:31:04.123 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:31:04.127 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:31:04.128 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:04.235 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:31:04.238 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:31:04.238 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:31:04.239 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:31:11 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:31:11.348 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:11.348 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:11.349 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:31:11.349 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:31:11.350 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:31:11.350 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:31:11.351 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.358 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.358 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:31:12.359 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:31:12.359 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:31:12.887 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:31:13.487 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:31:13.487 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:31:13.569 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:31:13.569 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:31:13.573 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:31:13.594 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:31:13.598 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:31:13.598 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:13.599 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:31:13.599 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:31:13.603 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:31:13.603 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:31:13.704 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:31:13.704 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:31:13.706 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:13.712 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:31:13.715 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:35:15 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:35:15.639 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:35:15.642 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:35:15.643 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:35:15.646 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.647 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:35:16.648 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:35:16.649 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.654 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.654 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:35:16.656 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:35:16.656 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:35:17.385 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:35:18.126 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:35:18.126 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:35:18.241 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:35:18.241 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:35:18.242 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:35:18.242 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:35:18.245 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:18.245 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:35:18.281 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:35:18.287 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:35:18.287 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:18.289 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:35:18.289 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:35:18.292 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:35:18.292 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:18.401 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:35:18.407 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:35:25 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:35:25.866 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:35:25.890 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:35:25.890 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:35:25.891 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.893 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:35:26.893 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:35:26.894 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.901 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.901 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:35:26.902 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:35:26.902 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:35:27.529 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:35:28.171 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:35:28.171 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:35:28.296 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:35:28.297 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:35:28.297 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:35:28.297 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:28.298 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:35:28.299 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:35:28.400 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:35:28.447 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:35:28.447 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:28.449 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:35:28.449 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:35:28.453 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:35:28.453 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:28.561 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:35:28.565 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:35:28.565 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:35:28.565 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:35:28.566 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:35:28.566 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:17 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:17.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.250 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:18.250 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:18.251 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.258 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.258 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:18.259 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:18.259 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:18.906 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:19.600 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:19.600 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:19.699 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:19.699 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:19.699 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:19.700 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:19.701 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:19.702 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:19.734 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:19.739 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:19.739 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:19.741 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:19.741 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:19.744 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:19.745 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:19.853 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:19.856 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:31 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:31.704 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:31.706 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:31.706 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:31.707 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.708 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:32.708 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:32.709 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.715 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.715 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:32.716 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:32.716 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:33.260 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:33.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:33.868 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:33.955 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:33.957 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:33.974 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:33.977 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:33.977 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:33.979 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:33.979 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:33.982 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:33.982 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:34.090 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:34.093 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:49 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:49.100 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.103 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:50.103 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:50.104 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:50.110 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:50.649 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:51.245 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:51.245 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:51.326 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:51.326 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:51.331 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:51.349 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:51.354 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:51.354 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:51.355 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:51.356 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:51.359 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:51.359 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:51.469 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:51.471 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:41:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:41:52.397 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:41:52.403 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:41:52.403 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:41:52.404 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.405 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:41:53.405 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:41:53.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.412 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.412 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:41:53.413 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:41:53.413 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:41:54.052 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:41:54.719 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:41:54.719 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:41:54.811 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:41:54.811 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:41:54.812 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:41:54.832 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:41:54.836 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:41:54.837 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:54.838 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:41:54.838 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:41:54.842 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:41:54.842 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:41:54.950 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:41:54.953 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:41:58 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.869 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:41:59.869 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:41:59.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.876 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.876 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:41:59.877 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:41:59.877 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:00.446 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:01.023 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:01.023 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:01.108 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:01.109 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:01.111 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:01.124 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:01.127 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:01.127 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:01.129 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:01.129 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:01.133 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:01.133 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:01.244 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:01.245 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:01.246 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:42:15 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:42:15.586 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:42:15.589 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:42:15.589 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:42:15.590 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.591 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:42:16.591 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:42:16.592 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:42:16.598 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:17.120 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:17.688 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:17.688 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:17.768 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:17.769 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:17.785 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:17.788 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:17.789 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:17.790 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:17.790 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:17.794 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:17.794 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:17.902 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:17.906 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:42:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:42:26.989 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:42:26.993 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:42:26.993 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:42:26.996 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:28.004 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:28.004 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:42:28.005 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:42:28.005 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:28.536 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:29.156 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:29.156 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:29.236 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:29.236 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:29.237 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:29.237 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:29.241 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:29.241 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:29.263 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:29.267 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:29.267 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:29.268 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:29.268 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:29.272 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:29.272 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:29.379 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:29.382 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:49:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:49:47.631 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:49:47.634 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:49:47.635 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:49:47.637 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.638 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:49:48.639 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:49:48.654 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.687 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.687 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:49:48.694 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:49:48.695 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:49:49.402 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:49:50.135 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:49:50.136 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:49:50.235 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:49:50.237 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:49:50.239 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 07:49:50.272 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:49:50.279 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:49:50.279 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:50.281 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:49:50.281 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:49:50.284 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:49:50.285 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:49:50.392 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:49:50.395 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:49:50.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:49:50.396 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:49:50.397 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:49:50.397 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:07:34 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:07:34.080 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:07:34.086 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:07:34.104 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:07:34.106 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:07:34.114 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.116 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:07:35.116 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:07:35.120 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.127 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.127 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:07:35.132 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:07:35.132 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:07:35.941 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:07:36.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:07:36.647 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:07:36.748 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:07:36.749 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:07:36.749 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:07:36.750 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:07:36.752 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:07:36.785 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:07:36.792 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:07:36.792 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:36.793 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:07:36.793 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:07:36.797 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:07:36.797 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:07:36.898 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:07:36.898 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:07:36.905 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:07:36.907 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:07:36.907 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:07:36.908 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:08:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:08:47.888 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:08:47.892 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:08:47.892 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:08:47.896 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.897 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:08:48.897 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:08:48.899 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.904 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.904 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:08:48.905 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:08:48.905 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:08:49.654 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:08:50.446 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:08:50.446 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:08:50.544 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:08:50.544 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:08:50.545 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:08:50.546 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:08:50.548 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:08:50.578 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:08:50.585 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:08:50.585 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:50.586 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:08:50.586 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:08:50.590 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:08:50.590 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:08:50.701 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:08:50.703 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:09:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:09:10.274 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:09:10.277 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:09:10.277 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:09:10.278 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.279 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:09:11.279 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:09:11.280 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.286 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.286 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:09:11.287 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:09:11.287 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:09:11.821 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:09:12.529 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:09:12.529 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:09:12.633 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:09:12.634 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:09:12.634 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:12.635 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:09:12.635 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:09:12.654 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:09:12.657 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:09:12.657 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:12.659 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:09:12.659 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:09:12.662 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:09:12.662 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:12.771 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:09:12.777 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:09:30 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:09:30.936 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:09:30.936 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:09:30.937 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.938 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:09:31.938 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:09:31.939 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.945 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.945 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:09:31.946 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:09:31.946 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:09:32.499 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:09:33.097 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:09:33.097 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:09:33.182 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:09:33.183 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:09:33.184 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:33.184 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:09:33.184 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:09:33.203 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:09:33.207 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:09:33.207 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:33.209 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:09:33.209 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:09:33.213 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:09:33.213 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:33.320 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:09:33.324 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:10:28 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:10:28.173 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:10:28.177 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:10:28.177 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:10:28.178 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.179 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:10:29.179 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:10:29.180 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.186 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.186 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:10:29.190 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:10:29.191 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:10:29.886 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:10:30.593 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:10:30.593 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:10:30.685 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:10:30.685 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:10:30.686 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:10:30.686 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:10:30.688 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:10:30.706 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:10:30.710 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:10:30.711 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:30.712 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:10:30.712 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:10:30.716 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:10:30.716 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:10:30.825 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:10:30.827 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:01 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:01.544 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:01.548 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:01.548 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:01.549 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.551 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:02.551 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:02.555 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.562 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.562 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:02.562 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:02.563 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:03.167 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:03.789 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:03.789 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:03.876 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:03.876 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:03.877 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:03.877 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:03.877 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:11:03.897 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:03.901 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:03.901 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:03.903 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:03.903 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:03.906 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:03.906 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:04.015 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:04.019 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:25 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:25.590 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:25.592 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:25.593 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:25.593 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:25.595 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:25.595 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:25.596 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.598 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:26.598 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:26.599 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.605 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.605 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:26.606 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:26.606 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:27.168 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:27.776 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:27.776 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:27.861 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:27.862 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:27.862 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:27.862 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:27.864 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:27.884 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:27.888 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:27.888 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:27.890 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:27.890 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:27.894 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:27.894 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:28.003 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:28.006 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:33.120 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:33.120 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:33.122 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:33.123 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:33.124 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.124 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:34.124 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:34.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.131 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.132 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:34.132 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:34.132 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:34.710 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:35.292 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:35.292 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:35.375 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:35.375 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:35.391 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:35.395 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:35.395 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:35.396 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:35.396 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:35.400 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:35.400 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:35.507 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:35.510 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:42 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:42.811 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.816 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:43.817 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:43.817 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.823 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.823 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:43.824 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:43.824 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:44.353 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:44.921 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:44.921 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:44.996 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:44.996 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:44.997 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:44.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:45.000 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:45.013 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:45.017 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:45.018 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:45.019 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:45.019 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:45.022 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:45.022 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:45.131 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:45.133 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:45.133 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:45.134 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:45.135 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:45.135 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:12:37 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:12:37.856 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:12:37.860 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:12:37.860 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:12:37.861 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.862 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:12:38.863 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:12:38.863 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.868 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:12:38.869 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:12:38.869 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:12:39.413 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:12:40.016 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:12:40.016 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:12:40.101 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:12:40.102 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:12:40.102 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:12:40.103 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:12:40.105 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:12:40.126 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:12:40.130 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:12:40.130 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:40.131 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:12:40.131 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:12:40.135 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:12:40.135 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:12:40.243 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:12:40.247 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:12:59 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:13:00.042 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:00.044 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:00.044 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:13:00.045 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:13:00.052 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:13:00.052 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:13:00.053 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.054 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:13:01.054 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:13:01.055 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.061 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.061 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:13:01.062 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:13:01.062 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:13:01.652 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:13:02.269 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:13:02.270 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:13:02.358 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:13:02.358 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:13:02.358 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:13:02.359 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:02.361 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:13:02.377 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:13:02.382 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:13:02.382 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:02.384 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:13:02.384 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:13:02.387 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:13:02.387 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:02.497 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:13:02.502 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:13:22 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:13:22.655 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:22.656 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:22.656 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:13:22.657 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:13:22.660 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:13:22.660 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:13:22.661 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.662 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:13:23.662 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:13:23.663 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.669 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.669 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:13:23.670 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:13:23.670 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:13:24.222 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:13:24.829 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:13:24.829 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:13:24.916 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:13:24.917 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:13:24.917 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:24.918 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:13:24.918 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:13:24.938 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:13:24.942 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:13:24.942 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:24.944 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:13:24.944 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:13:24.947 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:13:24.947 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:13:25.078 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:25.088 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:13:25.091 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:20:49 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:20:49.781 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:20:49.782 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:20:49.782 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:20:49.782 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:20:49.852 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:20:49.852 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:20:49.853 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:20:50.854 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:20:50.855 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:20:50.856 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:20:50.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:20:50.870 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:20:50.871 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:20:50.871 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:20:51.549 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:20:52.323 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:20:52.324 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:20:52.429 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:20:52.430 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:20:52.430 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:20:52.432 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:20:52.433 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:20:52.490 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:20:52.497 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:20:52.497 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:20:52.499 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:20:52.499 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:20:52.502 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:20:52.502 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:20:52.604 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:20:52.604 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:20:52.604 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:20:52.605 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:20:52.605 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:20:52.605 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:20:52.605 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:20:52.610 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:20:52.612 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:20:52.612 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:20:52.612 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:20:52.612 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:20:52.613 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:20:52.613 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:20:52.613 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:20:52.613 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:20:52.613 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:21:15 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:21:15.321 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:15.322 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:15.322 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:21:15.323 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:21:15.327 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:21:15.328 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:21:15.329 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:21:16.329 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:21:16.329 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:21:16.330 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:21:16.336 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:21:16.336 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:21:16.342 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:21:16.342 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:21:16.915 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:21:17.531 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:21:17.531 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:21:17.635 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:21:17.635 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:21:17.635 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:21:17.638 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:21:17.638 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:21:17.679 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:21:17.686 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:21:17.686 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:17.687 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:21:17.687 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:21:17.691 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:21:17.691 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:21:17.792 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:21:17.792 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:21:17.792 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:21:17.793 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:21:17.793 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:21:17.793 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:21:17.794 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:21:17.799 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:21:17.802 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:21:17.802 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:21:17.802 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:21:17.802 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:21:17.803 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:21:17.803 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:21:17.803 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:21:17.803 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:21:17.803 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:21:39 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:21:39.045 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:39.046 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:39.046 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:21:39.046 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:21:39.047 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:21:39.048 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:21:39.048 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:21:40.049 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:21:40.050 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:21:40.050 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:21:40.056 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:21:40.056 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:21:40.057 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:21:40.057 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:21:40.610 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:21:41.257 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:21:41.257 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:21:41.344 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:21:41.344 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:21:41.344 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:21:41.345 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:21:41.345 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:21:41.376 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:21:41.380 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:21:41.380 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:21:41.382 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:21:41.382 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:21:41.385 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:21:41.385 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:21:41.487 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:21:41.487 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:21:41.487 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:21:41.488 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:21:41.488 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:21:41.488 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:21:41.488 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:21:41.494 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:21:41.495 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:21:41.495 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:21:41.495 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:21:41.495 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:21:41.496 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:21:41.496 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:21:41.496 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:21:41.496 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:21:41.496 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:22:09 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/middleware/rate-limit.middleware.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:22:09.761 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:09.762 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:09.762 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:22:09.762 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:22:09.764 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:22:09.764 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:22:09.765 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:22:10.767 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:22:10.767 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:22:10.768 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:10.775 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:10.775 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:22:10.778 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:22:10.778 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:22:11.367 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:22:12.022 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:22:12.023 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:22:12.107 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:22:12.109 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:22:12.109 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:22:12.112 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:22:12.112 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:22:12.135 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:22:12.140 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:22:12.140 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:12.142 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:22:12.142 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:22:12.145 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:22:12.145 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:22:12.247 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:22:12.247 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:22:12.247 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:22:12.248 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:22:12.248 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:22:12.248 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:22:12.248 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:22:12.255 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:22:12.257 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:22:12.257 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:22:12.257 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:22:12.257 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:22:12.257 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:22:12.258 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:22:12.258 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:22:12.258 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:22:12.258 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:22:46 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:22:46.127 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:46.128 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:46.128 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:22:46.128 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:22:46.129 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:22:46.129 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:22:46.130 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:22:47.132 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:22:47.132 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:22:47.133 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:47.139 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:47.139 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:22:47.139 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:22:47.139 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:22:47.826 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:22:48.463 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:22:48.463 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:22:48.549 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:22:48.550 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:22:48.550 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:22:48.551 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:22:48.551 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:22:48.575 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:22:48.579 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:22:48.579 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:48.581 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:22:48.581 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:22:48.587 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:22:48.587 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:22:48.688 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:22:48.688 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:22:48.688 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:22:48.689 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:22:48.689 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:22:48.689 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:22:48.689 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:22:48.696 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:22:48.697 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:22:48.697 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:22:48.697 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:22:48.697 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:22:48.698 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:22:48.698 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:22:48.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:22:48.698 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:22:48.698 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:22:50 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified
Compilation error in /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:22:50.883 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:50.883 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:22:50.883 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:22:50.883 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:22:50.885 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:22:50.885 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:22:50.886 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:22:51.888 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:22:51.888 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:22:51.888 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:51.895 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:22:51.895 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:22:51.895 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:22:51.895 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:22:52.249 AM"}
AuthRateLimiter using memory backend
[ERROR] 08:22:52 â¨¯ Unable to compile TypeScript:
src/seo-crawler/queue/EnhancedQueueAdapter.ts(78,15): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(78,110): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(79,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(90,11): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(91,9): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(91,14): error TS1135: Argument expression expected.

[INFO] 08:22:57 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified
Compilation error in /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:22:57.608 AM"}
AuthRateLimiter using memory backend
[ERROR] 08:22:57 â¨¯ Unable to compile TypeScript:
src/seo-crawler/queue/EnhancedQueueAdapter.ts(89,9): error TS1472: 'catch' or 'finally' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(143,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(143,37): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(144,9): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(144,14): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(144,20): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(144,28): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(146,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(148,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(150,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(163,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(165,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(178,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(181,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(183,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(185,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(187,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(190,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(190,35): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(191,9): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(191,14): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(191,20): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(191,28): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(193,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(205,14): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(208,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(208,11): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(208,44): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(208,58): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(209,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(210,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(210,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(210,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(210,30): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(212,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(212,61): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,21): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,25): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,38): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,45): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,48): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,50): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(214,52): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(226,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(226,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(229,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(231,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(232,11): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(233,24): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(234,21): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(235,24): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(236,23): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(238,4): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(239,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(240,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(240,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(240,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(240,24): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(272,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(272,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(276,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(278,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(278,27): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(278,36): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(279,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(280,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(280,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(280,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(280,24): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(312,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(312,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(316,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(318,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(318,34): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(318,43): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(319,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(320,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(320,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(320,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(320,31): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(320,32): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(322,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(322,61): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(323,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(323,70): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(324,14): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(324,46): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(325,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(331,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(331,49): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(331,58): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(332,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(333,25): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(333,29): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(333,38): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(333,39): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(335,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(335,77): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(336,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(336,76): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(337,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(337,74): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(340,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(340,105): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(342,14): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(342,37): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(343,7): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(347,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(349,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(349,26): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(350,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(351,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(351,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(351,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(351,24): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(394,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(394,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(407,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(409,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(409,32): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(409,50): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(409,64): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(409,78): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(410,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(411,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(411,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(411,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(411,30): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(413,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(413,49): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(426,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(431,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(431,24): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(431,33): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(432,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(433,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(433,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(433,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(433,31): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(433,36): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(435,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(435,49): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(436,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(440,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(440,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(440,41): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(442,17): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(442,53): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(442,55): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(447,9): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(454,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(454,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(458,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(460,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(460,23): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(460,32): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(461,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(462,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(462,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(462,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(462,31): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(462,36): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(464,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(464,49): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(465,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(469,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(469,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(469,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(469,24): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(470,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(470,43): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(471,14): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(471,18): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(472,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(478,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(478,29): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(478,44): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(478,58): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(478,86): error TS1011: An element access expression should take an argument.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(479,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(480,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(480,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(480,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(480,31): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(480,33): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(482,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(487,9): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(489,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(489,71): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(490,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(490,73): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(492,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(497,8): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(499,14): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(499,82): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(500,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(506,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(506,21): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(506,35): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(507,9): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(507,14): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(507,20): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(507,22): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(513,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(515,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(515,22): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(515,36): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(516,9): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(516,14): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(516,20): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(516,22): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(522,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(524,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(524,23): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(524,54): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(524,68): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(525,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(526,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(526,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(526,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(526,24): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(536,5): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(536,7): error TS1005: 'try' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(539,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(541,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(541,22): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(541,48): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(542,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(543,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(543,47): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(544,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(544,90): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(545,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(545,51): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(547,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(547,76): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(549,14): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(557,8): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(558,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(571,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(571,16): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(571,30): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(572,11): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(572,53): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(574,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(574,34): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(574,36): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(590,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(592,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(592,18): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(592,32): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(593,9): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(594,11): error TS1003: Identifier expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(594,16): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(594,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(594,30): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(597,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(597,17): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(597,30): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(600,13): error TS1005: ':' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(600,54): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(601,12): error TS1359: Identifier expected. 'const' is a reserved word that cannot be used here.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(601,18): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(601,22): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(601,25): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(608,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(608,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(608,45): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(609,7): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(614,15): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(614,37): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(618,14): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(618,16): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(622,3): error TS1434: Unexpected keyword or identifier.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(622,19): error TS1005: ';' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(622,33): error TS1109: Expression expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(623,11): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(623,59): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(625,13): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(625,34): error TS1005: ',' expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(625,36): error TS1136: Property assignment expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(641,3): error TS1128: Declaration or statement expected.
src/seo-crawler/queue/EnhancedQueueAdapter.ts(642,1): error TS1128: Declaration or statement expected.

Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:22:57.989 AM"}
[INFO] 08:23:06 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:23:07.182 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:07.611 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:23:07.613 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:23:07.613 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:23:07.714 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:23:07.714 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:23:07.714 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:07.715 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:23:07.716 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:23:07.745 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:23:07.748 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:23:07.749 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:07.750 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:23:07.750 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:07.750 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:23:07.754 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:23:07.754 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:23:07.855 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:23:07.855 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:23:07.855 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:23:07.856 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:23:07.856 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:23:07.856 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:23:07.856 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:07.861 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:23:07.864 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:23:07.864 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:23:07.864 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:23:07.864 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:23:07.864 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:23:07.864 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:23:07.865 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:23:07.865 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:23:07.865 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:23:12 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:23:12.831 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:12.831 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:12.831 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:23:12.831 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:23:12.832 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:23:12.832 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:23:12.833 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:23:13.834 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:23:13.834 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:23:13.835 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:13.841 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:13.841 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:23:13.841 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:23:13.841 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:23:14.210 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:14.656 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:23:14.658 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:23:14.658 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:14.739 AM"}
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:23:14.741 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:23:14.741 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:23:14.741 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:23:14.742 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:23:14.761 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:23:14.765 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:23:14.765 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:14.766 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:23:14.766 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:14.767 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:23:14.770 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:23:14.770 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:23:14.872 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:23:14.873 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:14.878 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:23:14.880 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:23:14.880 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:23:14.880 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:23:14.880 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:23:14.881 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:23:14.881 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:23:14.881 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:23:14.881 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:23:14.881 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:23:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:23:33.666 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:33.667 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:33.667 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:23:33.667 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:23:33.669 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:23:33.670 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:23:33.670 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:23:34.672 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:23:34.672 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:23:34.672 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:23:34.673 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:34.679 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:34.679 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:23:34.680 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:23:34.680 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:23:35.302 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:35.945 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:23:35.947 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:23:35.947 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:23:36.032 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:23:36.032 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:23:36.033 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:36.033 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:23:36.033 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:23:36.053 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:23:36.058 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:23:36.058 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:36.059 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:23:36.059 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:36.059 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:23:36.062 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:23:36.062 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:23:36.164 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:23:36.164 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:23:36.164 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:23:36.165 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:23:36.165 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:23:36.165 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:23:36.165 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:36.172 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:23:36.173 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:23:36.173 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:23:36.173 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:23:36.173 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:23:36.174 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:23:36.174 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:23:36.174 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:23:36.174 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:23:36.174 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:23:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:23:52.081 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:52.082 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:52.082 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:23:52.082 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:23:52.083 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:23:52.083 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:23:52.084 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:23:53.085 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:23:53.085 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:23:53.086 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:23:53.086 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:53.092 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:23:53.092 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:23:53.092 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:23:53.093 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:23:53.634 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:54.292 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:23:54.294 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:23:54.294 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:54.384 AM"}
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:23:54.386 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:23:54.386 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:23:54.386 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:23:54.387 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:23:54.404 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:23:54.408 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:23:54.408 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:23:54.410 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:23:54.410 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:23:54.410 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:23:54.413 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:23:54.413 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:23:54.515 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:23:54.515 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:23:54.515 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:23:54.516 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:23:54.516 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:23:54.516 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:23:54.516 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:23:54.522 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:23:54.525 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:23:54.525 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:23:54.525 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:23:54.525 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:23:54.526 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:23:54.526 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:23:54.526 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:23:54.526 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:23:54.526 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:24:24 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:24:24.728 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:24.729 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:24.729 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:24:24.729 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:24:24.733 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:24:24.733 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:24:24.734 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:24:25.735 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:24:25.736 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:24:25.736 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:24:25.736 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:25.742 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:25.742 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:24:25.743 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:24:25.743 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:24:26.321 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:26.943 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:24:26.945 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:24:26.945 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:24:27.031 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:24:27.032 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:24:27.032 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:27.034 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:24:27.034 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:24:27.053 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:24:27.057 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:24:27.057 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:27.058 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:24:27.059 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:27.059 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:24:27.062 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:24:27.062 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:24:27.164 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:24:27.165 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:27.171 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:24:27.172 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:24:27.172 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:24:27.173 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:24:27.173 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:24:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/middleware/rate-limit.middleware.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:24:33.342 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:33.342 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:33.342 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:24:33.342 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:24:33.345 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:24:33.345 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:24:33.345 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:24:34.346 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:24:34.346 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:24:34.347 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:24:34.347 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:34.353 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:34.353 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:24:34.353 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:24:34.354 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:24:34.890 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:35.477 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:24:35.478 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:24:35.478 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:24:35.558 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:24:35.559 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:24:35.559 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:35.559 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:24:35.559 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:24:35.578 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:24:35.582 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:24:35.582 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:35.583 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:24:35.583 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:35.583 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:24:35.587 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:24:35.587 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:24:35.689 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:24:35.690 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:35.695 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:24:35.697 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:24:35.697 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:24:40 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:24:40.136 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:40.136 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:40.137 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:24:40.137 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:24:40.138 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:24:40.138 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:24:40.139 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:24:41.141 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:24:41.141 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:24:41.142 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:24:41.142 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:41.148 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:24:41.148 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:24:41.148 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:24:41.148 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:24:41.720 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:42.291 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:24:42.293 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:24:42.293 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:24:42.374 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:42.374 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:24:42.376 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:24:42.376 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:24:42.381 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:24:42.394 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:24:42.398 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:24:42.398 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:24:42.400 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:24:42.400 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:24:42.400 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:24:42.403 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:24:42.403 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:24:42.504 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:24:42.504 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:24:42.504 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:24:42.505 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:24:42.505 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:24:42.505 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:24:42.505 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:42.510 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:24:42.512 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:24:42.513 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:24:42.513 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:25:24 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/jwt-rs256.service.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:25:25.017 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:25:25.018 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:25:25.018 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:25:25.018 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:25:25.020 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:25:25.020 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:25:25.021 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:25:26.021 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:25:26.022 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:25:26.022 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:25:26.023 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:25:26.029 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:25:26.029 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:25:26.029 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:25:26.030 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:25:26.656 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:25:27.327 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:25:27.329 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:25:27.329 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:25:27.418 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:25:27.418 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:25:27.419 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:25:27.419 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:25:27.419 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:25:27.442 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:25:27.445 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:25:27.445 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:25:27.446 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:25:27.447 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:25:27.447 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:25:27.450 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:25:27.450 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:25:27.551 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:25:27.551 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:25:27.551 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:25:27.552 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:25:27.552 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:25:27.552 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:25:27.552 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:25:27.559 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:25:27.560 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:25:27.560 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:25:27.560 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:25:27.560 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:25:27.561 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:25:27.561 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:25:27.561 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:25:27.561 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:25:27.561 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:28:52 Reinitializing TS compilation
[INFO] 08:28:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/tsconfig.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:28:52.105 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:28:52.106 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:28:52.106 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:28:52.106 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:28:52.109 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:28:52.109 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:28:52.109 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:28:53.111 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:28:53.111 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:28:53.112 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:28:53.113 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:28:53.118 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:28:53.118 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:28:53.119 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:28:53.119 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:28:53.861 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:28:54.783 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:28:54.785 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:28:54.785 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:28:54.951 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:28:54.951 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:28:54.952 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:28:54.955 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:28:54.955 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:28:54.983 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:28:54.988 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:28:54.988 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:28:54.995 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:28:54.995 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:28:54.996 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:28:54.999 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:28:54.999 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:28:55.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:28:55.107 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:28:55.109 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:28:55.109 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:28:55.109 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:28:55.109 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:28:55.109 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:28:55.109 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:28:55.110 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:28:55.110 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:28:55.110 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:34:51 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/QueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:34:51.207 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:34:51.209 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:34:51.209 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:34:51.209 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:34:51.212 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:34:51.213 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:34:51.216 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:34:52.218 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:34:52.218 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:34:52.220 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:34:52.220 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:34:52.226 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:34:52.227 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:34:52.228 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:34:52.228 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:34:52.941 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:34:53.637 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:34:53.638 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:34:53.639 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:34:53.736 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:34:53.737 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:34:53.737 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:34:53.739 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:34:53.740 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:34:53.769 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:34:53.775 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:34:53.775 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:34:53.776 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:34:53.776 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:34:53.776 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:34:53.780 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:34:53.780 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:34:53.882 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:34:53.882 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:34:53.882 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:34:53.883 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:34:53.883 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:34:53.883 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:34:53.883 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:34:53.889 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:34:53.892 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:34:53.892 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:34:53.893 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:00 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/QueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:00.183 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:00.183 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:00.183 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:00.183 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:00.186 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:00.186 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:00.187 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:01.188 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:01.188 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:01.189 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:01.189 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:01.195 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:01.195 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:01.195 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:01.195 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:01.721 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:02.293 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:02.295 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:02.295 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:02.370 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:02.374 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:02.378 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:02.378 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:02.379 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:35:02.398 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:02.403 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:02.403 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:02.405 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:02.405 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:02.405 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:02.409 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:02.409 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:02.510 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:02.511 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:02.517 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:02.520 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:02.520 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:02.520 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:02.520 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:02.520 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:02.520 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:02.521 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:02.521 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:02.521 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:17 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedWorker.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:17.482 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:17.483 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:17.483 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:17.483 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:17.487 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:17.487 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:17.490 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:18.492 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:18.492 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:18.493 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:18.493 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:18.499 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:18.499 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:18.501 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:18.502 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:19.118 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:19.786 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:19.788 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:19.788 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:19.884 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:19.884 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:19.885 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:19.886 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:19.888 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:35:19.911 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:19.917 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:19.918 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:19.919 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:19.919 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:19.919 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:19.923 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:19.923 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:20.024 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:20.024 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:20.024 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:20.025 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:20.025 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:20.025 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:20.025 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:20.031 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:20.033 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:20.033 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:20.033 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:20.033 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:20.034 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:20.034 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:20.034 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:20.034 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:20.034 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedWorker.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:29.106 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:29.107 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:29.107 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:29.107 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:29.112 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:29.112 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:29.113 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:30.114 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:30.114 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:30.115 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:30.115 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:30.121 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:30.121 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:30.121 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:30.121 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:30.659 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:31.271 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:31.273 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:31.273 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:31.359 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:31.359 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:31.360 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:31.360 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:31.360 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:35:31.387 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:31.391 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:31.391 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:31.393 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:31.393 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:31.393 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:31.396 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:31.396 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:31.497 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:31.497 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:31.497 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:31.498 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:31.498 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:31.498 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:31.498 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:31.505 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:31.505 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:31.505 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:31.505 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:31.505 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:31.506 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:31.506 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:31.506 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:31.506 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:31.506 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:34 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedWorker.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:34.589 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:34.590 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:34.590 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:34.590 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:34.592 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:34.593 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:34.594 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:35.595 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:35.595 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:35.595 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:35.595 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:35.601 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:35.602 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:35.602 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:35.602 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:35.955 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:36.349 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:36.351 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:36.351 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:36.423 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:36.423 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:36.423 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:36.424 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:36.424 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:35:36.445 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:36.449 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:36.450 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:36.450 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:36.451 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:36.451 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:36.454 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:36.454 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:36.556 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:36.556 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:36.556 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:36.556 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:36.557 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:36.557 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:36.557 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:36.562 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:36.564 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:36.564 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:36.564 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:36.564 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:36.565 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:36.565 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:36.565 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:36.565 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:36.565 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:39 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedWorker.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:39.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:39.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:39.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:39.871 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:39.880 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:39.880 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:39.881 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:40.883 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:40.883 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:40.884 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:40.884 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:40.890 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:40.890 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:40.891 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:40.891 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:41.282 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:41.643 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:41.644 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:41.644 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:41.711 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:41.711 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:41.711 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:41.712 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:41.712 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:35:41.732 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:41.736 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:41.736 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:41.737 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:41.737 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:41.737 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:41.740 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:41.740 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:41.842 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:41.842 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:41.842 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:41.843 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:41.843 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:41.843 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:41.843 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:41.848 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:41.851 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:41.851 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:41.851 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:41.851 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:41.851 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:41.851 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:41.852 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:41.852 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:41.852 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:35:51 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:35:51.769 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:51.769 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:51.769 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:35:51.769 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:35:51.771 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:35:51.771 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:35:51.771 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:35:52.773 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:35:52.773 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:35:52.774 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:35:52.774 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:52.780 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:35:52.780 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:35:52.780 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:35:52.781 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:35:53.342 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:53.952 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:35:53.953 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:35:53.954 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:35:54.041 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:35:54.041 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:35:54.042 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:54.042 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:35:54.042 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:35:54.062 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:35:54.066 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:35:54.066 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:35:54.067 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:35:54.067 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:35:54.067 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:35:54.071 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:35:54.071 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:35:54.172 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:35:54.172 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:35:54.172 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:35:54.173 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:35:54.173 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:35:54.173 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:35:54.173 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:35:54.179 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:35:54.182 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:35:54.182 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:35:54.182 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:35:54.182 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:35:54.182 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:35:54.182 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:35:54.183 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:35:54.183 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:35:54.183 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:37:34 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:37:34.327 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:34.327 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:34.328 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:37:34.328 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:37:34.329 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:37:34.330 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:37:34.330 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:37:35.331 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:37:35.332 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:37:35.332 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:37:35.333 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:37:35.339 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:37:35.339 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:37:35.340 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:37:35.341 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:37:35.955 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:37:36.641 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:37:36.642 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:37:36.642 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:37:36.743 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:37:36.743 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:37:36.744 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:37:36.747 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:37:36.747 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:37:36.781 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:37:36.786 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:37:36.786 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:36.787 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:37:36.787 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:37:36.787 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:37:36.791 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:37:36.791 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:37:36.893 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:37:36.893 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:37:36.893 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:37:36.894 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:37:36.894 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:37:36.894 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:37:36.894 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:37:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:37:36.902 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:37:36.902 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:37:36.902 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:37:36.902 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:37:36.903 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:37:36.903 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:37:36.903 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:37:36.903 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:37:36.903 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:37:38 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:37:39.003 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:39.003 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:39.003 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:37:39.003 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:37:39.005 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:37:39.005 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:37:39.006 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:37:40.007 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:37:40.008 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:37:40.008 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:37:40.008 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:37:40.014 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:37:40.014 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:37:40.015 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:37:40.015 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:37:40.372 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:37:40.760 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:37:40.764 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:37:40.764 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:37:40.835 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:37:40.835 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:37:40.836 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:37:40.836 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:37:40.836 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:37:40.851 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:37:40.855 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:37:40.855 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:37:40.856 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:37:40.856 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:37:40.856 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:37:40.859 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:37:40.860 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:37:40.961 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:37:40.961 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:37:40.961 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:37:40.962 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:37:40.962 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:37:40.962 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:37:40.962 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:37:40.968 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:37:40.970 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:37:40.970 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:37:40.970 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:37:40.970 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:37:40.970 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:37:40.970 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:37:40.971 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:37:40.971 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:37:40.971 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:44:18 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:44:18.530 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:18.530 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:18.530 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:44:18.530 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:44:18.532 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:44:18.532 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:44:18.536 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:44:19.537 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:44:19.537 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:44:19.539 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:44:19.539 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:44:19.545 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:44:19.545 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:44:19.546 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:44:19.547 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:44:20.279 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:44:20.992 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:44:20.994 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:44:20.994 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:44:21.094 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:44:21.094 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:44:21.095 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:21.096 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:44:21.098 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:44:21.124 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:44:21.130 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:44:21.130 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:21.131 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:44:21.132 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:44:21.132 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:44:21.135 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:44:21.135 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:44:21.236 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:44:21.236 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:44:21.237 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:44:21.237 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:44:21.237 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:44:21.237 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:44:21.237 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:21.244 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:44:21.245 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:44:21.245 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:44:21.245 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:44:21.245 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:44:21.246 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:44:21.246 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:44:21.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:44:21.246 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:44:21.246 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:44:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:44:52.824 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:52.825 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:52.825 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:44:52.825 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:44:52.842 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:44:52.843 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:44:52.858 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:44:53.859 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:44:53.859 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:44:53.860 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:44:53.860 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:44:53.866 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:44:53.866 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:44:53.867 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:44:53.867 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:44:54.469 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:44:55.087 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:44:55.088 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:44:55.088 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:44:55.172 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:44:55.173 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:44:55.173 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:55.173 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:44:55.174 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:44:55.196 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:44:55.200 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:44:55.200 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:44:55.201 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:44:55.201 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:44:55.201 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:44:55.205 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:44:55.205 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:44:55.307 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:44:55.307 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:44:55.307 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:44:55.308 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:44:55.308 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:44:55.308 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:44:55.308 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:55.313 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:44:55.318 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:44:55.318 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:44:55.318 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:44:55.318 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:44:55.318 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:44:55.319 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:44:55.319 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:44:55.319 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:44:55.319 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:45:24 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:45:24.260 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:24.261 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:24.261 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:45:24.261 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:45:24.262 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:45:24.262 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:45:24.263 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:45:25.265 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:45:25.265 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:45:25.268 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:45:25.268 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:25.274 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:25.274 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:45:25.275 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:45:25.275 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:45:25.853 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:26.469 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:45:26.470 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:45:26.470 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:26.552 AM"}
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:45:26.555 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:45:26.555 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:45:26.556 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:45:26.556 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:45:26.578 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:45:26.582 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:45:26.582 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:26.583 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:45:26.583 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:26.584 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:45:26.587 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:45:26.587 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:45:26.688 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:45:26.689 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:45:26.689 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:45:26.689 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:45:26.689 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:45:26.689 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:45:26.690 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:26.695 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:45:26.698 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:45:26.698 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:45:26.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:45:26.698 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:45:26.698 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:45:26.698 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:45:26.699 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:45:26.699 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:45:26.699 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:45:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:45:29.351 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:29.351 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:29.351 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:45:29.351 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:45:29.358 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:45:29.358 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:45:29.359 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:45:30.359 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:45:30.359 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:45:30.360 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:45:30.360 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:30.366 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:30.366 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:45:30.366 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:45:30.367 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:45:30.722 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:31.082 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:45:31.083 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:45:31.083 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:31.145 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:45:31.146 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:45:31.146 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:45:31.147 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:45:31.148 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:45:31.164 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:45:31.167 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:45:31.167 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:31.168 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:45:31.168 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:31.168 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:45:31.172 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:45:31.172 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:45:31.272 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:45:31.272 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:45:31.272 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:45:31.273 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:45:31.273 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:45:31.273 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:45:31.273 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:31.279 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:45:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:45:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:45:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:45:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:45:31.282 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:45:31.282 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:45:31.282 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:45:31.282 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:45:31.282 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:45:43 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:45:43.659 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:43.659 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:43.659 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:45:43.660 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:45:43.661 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:45:43.661 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:45:43.662 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:45:44.663 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:45:44.663 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:45:44.664 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:45:44.664 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:44.670 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:45:44.670 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:45:44.671 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:45:44.671 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:45:45.204 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:45.793 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:45:45.795 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:45:45.795 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:45:45.880 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:45:45.880 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:45:45.881 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:45.881 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:45:45.881 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:45:45.902 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:45:45.909 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:45:45.909 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:45:45.911 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:45:45.911 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:45:45.911 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:45:45.914 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:45:45.914 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:45:46.016 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:45:46.016 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:45:46.016 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:45:46.017 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:45:46.017 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:45:46.017 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:45:46.017 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:46.022 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:45:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:45:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:45:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:45:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:45:46.031 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:45:46.031 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:45:46.031 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:45:46.031 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:45:46.031 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:46:20 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:46:20.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:20.871 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:20.871 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:46:20.871 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:46:20.876 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:46:20.876 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:46:20.876 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:46:21.878 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:46:21.878 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:46:21.878 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:46:21.879 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:46:21.884 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:46:21.884 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:46:21.885 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:46:21.885 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:46:22.518 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:46:23.138 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:46:23.139 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:46:23.139 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:46:23.220 AM"}
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:46:23.222 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:46:23.222 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:46:23.223 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:46:23.223 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:46:23.244 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:46:23.248 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:46:23.249 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:23.250 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:46:23.250 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:46:23.250 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:46:23.254 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:46:23.254 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:46:23.355 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:46:23.355 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:46:23.355 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:46:23.356 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:46:23.356 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:46:23.356 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:46:23.356 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:46:23.361 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:46:23.363 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:46:23.363 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:46:23.363 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:46:23.363 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:46:23.364 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:46:23.364 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:46:23.364 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:46:23.364 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:46:23.364 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:46:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:46:29.545 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:29.545 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:29.545 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:46:29.545 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:46:29.547 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:46:29.547 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:46:29.548 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:46:30.548 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:46:30.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:46:30.549 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:46:30.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:46:30.554 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:46:30.554 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:46:30.554 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:46:30.554 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:46:31.121 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:46:31.711 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:46:31.713 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:46:31.713 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:46:31.798 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:46:31.798 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:46:31.799 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:46:31.799 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:46:31.799 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:46:31.817 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:46:31.820 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:46:31.820 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:46:31.822 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:46:31.822 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:46:31.822 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:46:31.826 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:46:31.826 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:46:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:46:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:46:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:46:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:46:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:46:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:46:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:46:31.934 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:46:31.936 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:46:31.936 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:46:31.936 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:46:31.936 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:46:31.937 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:46:31.937 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:46:31.937 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:46:31.937 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:46:31.937 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:53:31 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/controllers/enhanced-analysis.controller.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:53:31.796 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:53:31.801 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:53:31.801 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:53:31.801 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:53:31.814 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:53:31.814 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:53:31.817 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:53:32.819 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:53:32.820 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:53:32.823 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:53:32.823 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:53:32.829 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:53:32.829 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:53:32.832 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:53:32.832 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:53:33.466 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:53:34.168 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:53:34.169 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:53:34.170 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:53:34.267 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:53:34.268 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:53:34.268 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:53:34.270 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:53:34.271 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:53:34.300 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:53:34.305 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:53:34.305 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:53:34.306 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:53:34.306 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:53:34.306 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:53:34.310 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:53:34.310 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:53:34.411 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:53:34.411 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:53:34.411 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:53:34.412 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:53:34.412 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:53:34.412 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:53:34.412 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:53:34.417 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:53:34.421 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:53:34.421 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:53:34.421 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:53:34.421 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:53:34.421 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:53:34.421 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:53:34.422 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:53:34.422 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:53:34.422 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:54:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:54:29.251 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:29.252 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:29.252 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:54:29.252 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:54:29.254 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:54:29.255 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:54:29.255 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:54:30.257 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:54:30.257 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:54:30.258 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:54:30.258 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:54:30.264 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:54:30.264 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:54:30.265 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:54:30.266 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:54:30.920 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:54:31.614 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:54:31.615 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:54:31.616 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:54:31.703 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:54:31.703 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:54:31.704 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:54:31.704 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:54:31.704 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:54:31.725 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:54:31.730 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:54:31.730 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:31.731 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:54:31.731 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:54:31.731 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:54:31.735 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:54:31.735 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:54:31.836 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:54:31.836 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:54:31.836 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:54:31.837 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:54:31.837 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:54:31.837 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:54:31.837 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:54:31.844 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:54:31.845 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:54:31.846 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:54:31.846 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:54:31.846 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:54:31.846 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:54:31.847 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:54:31.847 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:54:31.847 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:54:31.847 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:54:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:54:33.286 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:33.286 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:33.286 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:54:33.286 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:54:33.287 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:54:33.287 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:54:33.288 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:54:34.289 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:54:34.289 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:54:34.290 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:54:34.290 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:54:34.296 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:54:34.296 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:54:34.296 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:54:34.296 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:54:34.647 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:54:35.009 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:54:35.011 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:54:35.011 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:54:35.075 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:54:35.079 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:54:35.080 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:54:35.080 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:54:35.080 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:54:35.100 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:54:35.104 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:54:35.104 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:54:35.105 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:54:35.105 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:54:35.105 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:54:35.109 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:54:35.109 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:54:35.210 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:54:35.210 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:54:35.210 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:54:35.211 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:54:35.211 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:54:35.211 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:54:35.211 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:54:35.227 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:54:35.237 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:54:35.237 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:54:35.237 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:54:35.237 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:54:35.245 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:54:35.245 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:54:35.255 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:54:35.256 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:54:35.256 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:55:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:55:29.516 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:29.517 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:29.517 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:55:29.517 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:55:29.519 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:55:29.519 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:55:29.519 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:55:30.521 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:55:30.521 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:55:30.522 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:55:30.522 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:55:30.527 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:55:30.527 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:55:30.528 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:55:30.528 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:55:31.148 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:55:31.849 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:55:31.851 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:55:31.851 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:55:31.935 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:55:31.936 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:55:31.938 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:55:31.938 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:55:31.939 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:55:31.963 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:55:31.967 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:55:31.967 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:31.969 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:55:31.969 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:55:31.969 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:55:31.972 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:55:31.972 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:55:32.074 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:55:32.074 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:55:32.074 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:55:32.075 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:55:32.075 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:55:32.075 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:55:32.075 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:55:32.081 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:55:32.084 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:55:32.084 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:55:32.084 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:55:32.084 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:55:32.085 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:55:32.085 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:55:32.085 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:55:32.085 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:55:32.085 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:55:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:55:33.215 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:33.215 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:33.215 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:55:33.215 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:55:33.217 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:55:33.217 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:55:33.218 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:55:34.219 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:55:34.219 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:55:34.220 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:55:34.220 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:55:34.226 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:55:34.226 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:55:34.226 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:55:34.226 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:55:34.579 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:55:34.937 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:55:34.938 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:55:34.938 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:55:34.999 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:55:35.003 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:55:35.005 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:55:35.006 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:55:35.006 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:55:35.022 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:55:35.027 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:55:35.027 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:55:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:55:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:55:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:55:35.032 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:55:35.032 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:55:35.133 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:55:35.133 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:55:35.133 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:55:35.134 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:55:35.134 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:55:35.134 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:55:35.134 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:55:35.143 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:55:35.148 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:55:35.148 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:55:35.149 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:55:35.149 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:56:08 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/engine/AnalysisModules/ContentQuality.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:56:08.680 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:08.683 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:08.683 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:56:08.683 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:56:08.686 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:56:08.686 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:56:08.687 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:56:09.689 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:56:09.689 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:56:09.690 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:56:09.690 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:09.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:09.695 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:56:09.696 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:56:09.696 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:56:10.255 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:10.885 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:56:10.887 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:56:10.887 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:10.969 AM"}
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:56:10.971 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:56:10.971 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:56:10.971 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:56:10.972 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:56:10.994 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:56:10.998 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:56:10.998 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:10.999 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:56:10.999 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:10.999 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:56:11.003 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:56:11.003 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:56:11.104 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:56:11.104 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:56:11.104 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:56:11.105 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:56:11.105 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:56:11.105 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:56:11.105 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:11.112 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:56:11.113 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:56:11.113 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:56:11.114 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:56:11.114 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:56:18 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/engine/AnalysisModules/EnhancedRecommendationEngine.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:56:18.887 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:18.887 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:18.887 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:56:18.887 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:56:18.890 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:56:18.890 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:56:18.891 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:56:19.892 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:56:19.892 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:56:19.893 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:56:19.893 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:19.899 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:19.899 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:56:19.900 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:56:19.900 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:56:20.447 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:21.063 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:56:21.064 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:56:21.064 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:56:21.149 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:56:21.150 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:56:21.150 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:21.150 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:56:21.150 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:56:21.172 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:56:21.177 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:56:21.177 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:21.178 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:56:21.178 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:21.178 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:56:21.182 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:56:21.182 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:56:21.282 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:56:21.282 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:56:21.282 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:56:21.283 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:56:21.283 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:56:21.283 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:56:21.283 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:21.289 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:56:21.291 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:56:21.291 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:56:21.291 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:56:21.291 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:56:21.291 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:56:21.291 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:56:21.292 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:56:21.292 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:56:21.292 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:56:27 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/engine/AnalysisModules/TechnicalSEO.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:56:27.460 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:27.460 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:27.461 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:56:27.461 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:56:27.463 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:56:27.463 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:56:27.464 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:56:28.465 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:56:28.465 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:56:28.466 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:56:28.466 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:28.472 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:28.472 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:56:28.473 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:56:28.473 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:56:29.017 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:29.598 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:56:29.599 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:56:29.599 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:56:29.682 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:56:29.682 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:56:29.682 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:29.683 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:56:29.683 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:56:29.703 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:56:29.707 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:56:29.707 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:29.708 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:56:29.708 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:29.708 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:56:29.711 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:56:29.712 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:56:29.813 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:56:29.813 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:56:29.813 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:56:29.814 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:56:29.814 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:56:29.814 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:56:29.814 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:29.819 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:56:29.822 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:56:29.822 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:56:29.822 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:56:29.822 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:56:29.822 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:56:29.822 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:56:29.823 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:56:29.823 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:56:29.823 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:56:38 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:56:38.251 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:38.251 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:38.252 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:56:38.252 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:56:38.253 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:56:38.253 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:56:38.254 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:56:39.256 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:56:39.256 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:56:39.257 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:56:39.257 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:39.263 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:39.263 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:56:39.263 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:56:39.263 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:56:39.851 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:40.458 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:56:40.459 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:56:40.459 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:40.542 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:56:40.544 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:56:40.545 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:56:40.545 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:56:40.546 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:56:40.563 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:56:40.568 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:56:40.568 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:40.569 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:56:40.569 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:40.569 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:56:40.573 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:56:40.573 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:56:40.674 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:56:40.674 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:56:40.675 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:56:40.675 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:56:40.675 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:56:40.675 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:56:40.676 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:40.681 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:56:40.684 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:56:40.684 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:56:40.684 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:56:40.684 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:56:40.685 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:56:40.685 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:56:40.685 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:56:40.685 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:56:40.685 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:56:54 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:56:54.494 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:54.494 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:54.494 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:56:54.494 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:56:54.496 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:56:54.496 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:56:54.496 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:56:55.497 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:56:55.498 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:56:55.498 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:56:55.498 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:55.503 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:56:55.503 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:56:55.504 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:56:55.504 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:56:56.048 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:56.675 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:56:56.677 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:56:56.677 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:56:56.763 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:56:56.764 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:56:56.764 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:56.764 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:56:56.765 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:56:56.788 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:56:56.793 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:56:56.793 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:56:56.794 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:56:56.794 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:56:56.794 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:56:56.798 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:56:56.798 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:56:56.899 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:56:56.899 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:56:56.899 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:56:56.900 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:56:56.900 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:56:56.900 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:56:56.900 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:56:56.905 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:56:56.908 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:56:56.908 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:56:56.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:56:56.908 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:56:56.909 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:56:56.909 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:56:56.909 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:56:56.909 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:56:56.909 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:57:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/DatabaseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:57:10.633 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:10.633 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:10.633 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:57:10.633 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:57:10.636 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:57:10.637 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:57:10.637 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:57:11.637 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:57:11.637 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:57:11.638 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:57:11.638 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:11.644 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:11.644 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:57:11.644 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:57:11.645 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:57:12.184 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:12.794 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:57:12.795 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:57:12.795 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:57:12.881 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:57:12.882 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:57:12.882 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:12.882 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:57:12.882 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:57:12.901 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:57:12.906 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:57:12.906 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:12.907 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:57:12.907 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:12.907 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:57:12.911 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:57:12.911 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:57:13.012 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:57:13.012 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:57:13.012 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:57:13.013 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:57:13.013 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:57:13.013 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:57:13.013 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:13.019 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:57:13.021 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:57:13.021 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:57:13.022 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:57:13.022 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:57:28 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:57:28.540 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:28.540 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:28.540 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:57:28.540 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:57:28.544 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:57:28.544 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:57:28.545 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:57:29.548 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:57:29.548 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:57:29.586 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:29.595 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:29.595 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:57:29.597 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:57:29.597 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:57:30.274 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:30.966 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:57:30.967 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:57:30.967 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:31.123 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:57:31.124 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:57:31.124 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:57:31.125 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:57:31.127 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:57:31.168 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:57:31.172 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:57:31.172 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:31.173 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:57:31.173 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:31.174 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:57:31.177 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:57:31.177 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:57:31.280 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:57:31.280 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:57:31.280 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:57:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:57:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:57:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:57:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:31.287 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:57:31.290 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:57:31.290 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:57:31.290 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:57:31.290 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:57:31.290 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:57:31.290 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:57:31.291 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:57:31.291 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:57:31.291 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:57:32 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:57:32.211 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:32.211 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:32.211 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:57:32.212 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:57:32.215 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:57:32.215 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:57:32.216 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:57:33.218 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:57:33.218 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:57:33.219 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:57:33.219 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:33.226 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:33.226 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:57:33.227 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:57:33.227 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:57:33.784 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:34.396 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:57:34.398 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:57:34.398 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:57:34.477 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:57:34.478 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:57:34.478 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:34.478 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:57:34.479 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:57:34.502 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:57:34.506 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:57:34.506 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:34.507 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:57:34.507 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:34.507 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:57:34.511 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:57:34.511 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:57:34.612 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:57:34.613 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:34.619 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:57:34.623 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:57:34.623 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:57:34.623 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:57:34.623 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:57:34.623 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:57:34.623 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:57:34.624 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:57:34.624 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:57:34.624 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:57:52 Reinitializing TS compilation
[INFO] 08:57:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/tsconfig.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:57:52.984 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:52.985 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:52.985 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:57:52.985 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:57:52.987 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:57:52.987 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:57:52.988 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:57:53.991 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:57:53.991 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:57:53.992 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 08:57:53.992 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:53.999 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:57:53.999 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:57:54.001 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:57:54.001 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:57:54.658 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:55.522 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:57:55.524 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:57:55.524 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:57:55.694 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:57:55.694 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:57:55.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:55.695 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:57:55.695 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:57:55.716 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:57:55.720 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:57:55.720 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:57:55.725 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:57:55.726 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 08:57:55.726 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:57:55.730 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:57:55.730 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:57:55.832 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:57:55.832 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:57:55.832 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:57:55.833 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:57:55.833 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:57:55.833 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:57:55.833 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:57:55.839 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:57:55.842 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:57:55.842 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:57:55.842 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:57:55.842 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:57:55.842 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:57:55.842 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:57:55.843 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:57:55.843 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:57:55.843 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:34:42 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:34:43.062 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:34:43.074 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:34:43.075 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:34:43.077 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:34:43.102 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:34:43.104 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:34:43.117 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:34:44.200 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:34:44.219 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:34:44.264 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:34:44.280 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:34:44.315 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:34:44.316 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:34:44.366 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:34:44.370 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:34:48.798 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:05.332 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:35:05.376 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:35:05.377 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[33m[33mwarn[33m[39m: 	[33mRedis connection failed, using fallback mode: Connection timeout[39m {"stack":"Error: Connection timeout\n    at Socket.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/@redis/client/dist/lib/client/socket.js:177:124)\n    at Object.onceWrapper (node:events:632:28)\n    at Socket.emit (node:events:518:28)\n    at Socket._onTimeout (node:net:609:8)\n    at listOnTimeout (node:internal/timers:588:17)\n    at processTimers (node:internal/timers:523:7)","timestamp":"2025-06-03 09:35:06.266 AM"}
Redis Client Error in rate-limit middleware (falling back to memory): Connection timeout
Redis Client Error in rate-limit middleware (falling back to memory): Connection timeout
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:35:06.359 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:35:06.361 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:06.370 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:35:06.373 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"2ms","timestamp":"2025-06-03 09:35:06.601 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:35:06.616 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:35:06.616 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:06.620 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:35:06.620 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:06.621 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:35:06.636 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:35:06.636 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:35:06.740 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:35:06.740 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:35:06.741 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:35:06.742 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:35:06.742 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:35:06.743 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:35:06.743 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:06.764 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:35:06.765 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:35:06.766 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:35:06.766 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:35:06.766 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:35:06.767 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:35:06.767 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:35:06.768 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:35:06.768 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:35:06.768 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:35:31 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:35:31.280 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:35:31.281 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:35:31.286 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:35:31.286 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:35:31.294 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:35:32.296 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:35:32.297 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:35:32.298 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:35:32.299 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:32.307 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:32.307 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:35:32.310 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:35:32.311 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:35:33.386 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:34.516 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:35:34.519 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:35:34.520 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:35:34.678 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:35:34.684 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:35:34.685 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:34.685 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:35:34.685 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 09:35:34.708 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:35:34.713 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:35:34.713 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:34.715 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:35:34.715 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:34.715 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:35:34.721 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:35:34.721 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:35:34.822 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:35:34.822 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:35:34.823 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:35:34.824 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:35:34.824 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:35:34.824 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:35:34.824 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:34.834 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:35:34.836 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:35:34.836 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:35:34.836 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:35:34.836 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:35:34.837 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:35:34.837 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:35:34.838 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:35:34.838 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:35:34.838 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:35:37 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:35:37.840 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:37.841 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:37.842 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:35:37.846 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:35:37.866 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:35:37.866 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:35:37.879 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:35:38.884 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:35:38.889 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:35:38.894 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:35:38.897 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:38.902 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:38.903 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:35:38.906 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:35:38.908 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:35:40.502 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:41.762 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:35:41.764 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:35:41.765 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:35:41.950 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:41.963 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:35:41.973 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:35:41.974 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:35:41.976 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 09:35:42.112 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:35:42.123 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:35:42.124 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:42.126 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:35:42.126 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:42.126 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:35:42.134 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:35:42.134 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:35:42.237 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:35:42.237 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:35:42.237 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:35:42.240 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:35:42.240 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:35:42.240 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:35:42.240 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:42.251 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:35:42.251 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:35:42.252 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:35:42.252 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:35:42.252 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:35:42.252 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:35:42.253 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:35:42.253 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:35:42.254 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:35:42.254 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:35:48 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:35:48.083 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:48.086 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:48.090 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:35:48.091 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:35:48.102 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:35:48.102 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:35:48.115 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:35:49.119 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:35:49.120 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:35:49.130 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:35:49.131 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:49.137 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:49.137 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:35:49.141 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:35:49.142 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:35:50.196 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:51.276 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:35:51.279 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:35:51.280 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:35:51.469 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:51.478 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:35:51.481 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:35:51.482 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:35:51.483 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 09:35:51.505 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:35:51.513 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:35:51.513 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:51.515 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:35:51.515 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:51.516 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:35:51.523 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:35:51.524 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:35:51.625 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:35:51.625 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:35:51.625 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:35:51.627 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:35:51.627 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:35:51.627 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:35:51.627 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:51.636 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:35:51.640 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:35:51.641 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:35:51.641 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:35:51.641 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:35:51.642 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:35:51.642 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:35:51.643 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:35:51.643 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:35:51.643 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:35:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:35:52.723 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:52.725 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:52.725 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:35:52.725 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:35:52.735 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:35:52.735 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:35:52.739 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:35:53.743 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:35:53.748 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:35:53.752 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:35:53.753 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:53.762 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:35:53.762 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:35:53.764 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:35:53.765 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:35:54.471 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:55.411 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:35:55.416 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:35:55.416 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:35:55.670 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:35:55.674 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:35:55.682 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:55.709 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:35:55.711 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 09:35:55.747 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:35:55.752 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:35:55.752 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:35:55.755 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:35:55.756 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:35:55.756 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:35:55.763 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:35:55.763 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:35:55.864 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:35:55.866 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:35:55.867 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:35:55.869 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:35:55.869 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:35:55.869 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:35:55.869 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:35:55.884 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:35:55.886 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:35:55.886 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:35:55.887 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:35:55.887 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:35:55.887 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:35:55.887 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:35:55.889 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:35:55.889 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:35:55.889 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:36:20 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:36:20.584 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:36:20.586 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:36:20.586 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:36:20.587 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:36:20.640 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:36:20.644 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:36:20.678 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:36:21.680 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:36:21.681 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:36:21.683 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:36:21.684 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:36:21.696 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:36:21.696 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:36:21.698 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:36:21.698 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:36:22.964 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:36:24.979 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:36:25.018 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:36:25.019 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:36:26.452 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:36:26.454 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:36:26.457 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:36:26.468 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:36:26.482 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"6ms","timestamp":"2025-06-03 09:36:26.691 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:36:26.714 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:36:26.714 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:36:26.729 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:36:26.730 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:36:26.732 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:36:26.744 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:36:26.744 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:36:26.846 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:36:26.847 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:36:26.847 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:36:26.850 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:36:26.850 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:36:26.850 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:36:26.851 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:36:26.868 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:36:26.875 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:36:26.875 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:36:26.875 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:36:26.875 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:36:26.877 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:36:26.877 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:36:26.878 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:36:26.879 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:36:26.879 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:37:05 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:37:05.310 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:37:05.325 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:37:05.326 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:37:05.327 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:37:05.401 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:37:05.402 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:37:05.459 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:37:06.510 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:37:06.552 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:37:06.642 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:37:06.836 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:37:06.840 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:37:06.841 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:37:06.869 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:37:06.872 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:37:14.719 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:37:19.045 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:37:19.080 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:37:19.081 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:37:19.665 AM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:37:19.668 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:37:19.671 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:19.708 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:37:19.709 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"22ms","timestamp":"2025-06-03 09:37:20.035 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:37:20.072 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:37:20.072 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:37:20.079 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:37:20.079 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:37:20.079 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:37:20.120 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:37:20.121 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:37:20.228 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:37:20.243 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:37:20.260 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:37:20.284 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:37:20.284 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:37:20.285 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:37:20.285 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:20.325 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:37:20.331 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:37:20.331 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:37:20.331 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:37:20.331 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:37:20.346 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:37:20.346 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:37:20.347 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:37:20.347 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:37:20.347 AM"}
âœ… Server started successfully on port 4000
[INFO] 09:38:07 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 09:38:07.819 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:38:07.823 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:38:07.824 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 09:38:07.824 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 09:38:07.844 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 09:38:07.845 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 09:38:07.851 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 09:38:08.853 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 09:38:08.856 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 09:38:08.867 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 09:38:08.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:38:08.891 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 09:38:08.892 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 09:38:08.900 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 09:38:08.901 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 09:38:10.456 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:38:12.759 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 09:38:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 09:38:12.765 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 09:38:13.319 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 09:38:13.322 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 09:38:13.326 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 09:38:13.328 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:38:13.429 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"3ms","timestamp":"2025-06-03 09:38:13.742 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 09:38:13.772 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 09:38:13.773 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 09:38:13.776 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 09:38:13.776 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 09:38:13.777 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 09:38:13.786 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 09:38:13.786 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 09:38:13.891 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 09:38:13.892 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 09:38:13.894 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 09:38:13.953 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 09:38:13.953 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 09:38:13.955 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 09:38:13.958 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:38:13.988 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 09:38:13.990 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 09:38:13.990 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 09:38:13.990 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 09:38:13.990 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 09:38:13.992 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 09:38:13.992 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 09:38:13.994 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 09:38:13.994 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 09:38:13.994 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 10:38:13.968 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 10:38:13.979 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 10:38:13.980 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 10:38:13.980 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:16:16.502 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:16:20.703 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 11:38:13.978 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 11:38:13.979 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 11:38:13.979 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 11:38:13.980 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:48:26.590 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:48:32.471 AM"}
[31m[31merror[31m[39m: 	[31mError verifying email transporter: getaddrinfo ENOTFOUND smtp.example.com[39m {"code":"EDNS","command":"CONN","errno":-3008,"hostname":"smtp.example.com","stack":"Error: getaddrinfo ENOTFOUND smtp.example.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)","syscall":"getaddrinfo","timestamp":"2025-06-03 12:04:59.924 PM"}
[31m[31merror[31m[39m: 	[31mFailed to initialize email service: Failed to initialize email service[39m {"stack":"Error: Failed to initialize email service\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email.service.ts:116:18\n    at SMTPConnection.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-transport/index.js:347:24)\n    at Object.onceWrapper (node:events:633:26)\n    at SMTPConnection.emit (node:events:518:28)\n    at SMTPConnection._onError (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:799:14)\n    at Immediate.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:344:52)\n    at processImmediate (node:internal/timers:485:21)","timestamp":"2025-06-03 12:04:59.934 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service will be disabled[39m {"timestamp":"2025-06-03 12:04:59.934 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-03 12:04:59.934 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test-1748966699504@example.com","timestamp":"2025-06-03 12:04:59.934 PM","userId":"4cd5f0a7-42ee-42ae-83a7-ace4c159fe0b"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test-1748966699504@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-03 12:04:59.962 PM","userAgent":"axios/1.9.0","userId":"4cd5f0a7-42ee-42ae-83a7-ace4c159fe0b"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test-1748966699504@example.com","ipAddress":"::1","timestamp":"2025-06-03 12:04:59.963 PM","userId":"4cd5f0a7-42ee-42ae-83a7-ace4c159fe0b"}
[0mPOST /api/auth/register [32m201[0m 380.042 ms - 338[0m
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:09:36.350 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:09:36.353 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"2428ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 12:09:36.828 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 2428ms[39m {"timestamp":"2025-06-03 12:09:36.830 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 2428ms[39m {"operationName":"select","timestamp":"2025-06-03 12:09:36.830 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"2483ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 12:09:36.869 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 2483ms[39m {"timestamp":"2025-06-03 12:09:36.869 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 2483ms[39m {"operationName":"select","timestamp":"2025-06-03 12:09:36.870 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"2482ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 12:09:36.870 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 2482ms[39m {"timestamp":"2025-06-03 12:09:36.870 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 2482ms[39m {"operationName":"select","timestamp":"2025-06-03 12:09:36.870 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected[39m {"duration":"1068ms","params":"[]","query":"\n        SELECT \n          datname,\n          numbackends as active_connections,\n          xact_commit as committed_transactions,\n          xact_rollback as rolled_back_transactions,\n          blks_re...","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 12:09:37.946 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected: 1068ms[39m {"timestamp":"2025-06-03 12:09:37.947 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1068ms[39m {"operationName":"\n","timestamp":"2025-06-03 12:09:37.947 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected[39m {"duration":"1170ms","params":"[]","query":"\n        SELECT \n          count(*) as total_connections,\n          count(*) FILTER (WHERE state = 'active') as active_connections,\n          count(*) FILTER (WHERE state = 'idle') as idle_connections...","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 12:09:38.035 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected: 1170ms[39m {"timestamp":"2025-06-03 12:09:38.036 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1170ms[39m {"operationName":"\n","timestamp":"2025-06-03 12:09:38.036 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow health check detected: 3695ms[39m {"checks":[{"reason":"success","status":"fulfilled"},{"reason":"success","status":"fulfilled"},{"reason":"success","status":"fulfilled"}],"timestamp":"2025-06-03 12:09:38.039 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:09:41.460 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:09:41.461 PM"}
[INFO] 12:14:29 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 12:14:30.016 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:14:30.021 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:14:30.021 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 12:14:30.022 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 12:14:30.043 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 12:14:30.045 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 12:14:30.054 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 12:14:31.056 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 12:14:31.058 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 12:14:31.064 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 12:14:31.067 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:14:31.085 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:14:31.085 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 12:14:31.089 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 12:14:31.091 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 12:14:31.982 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:14:32.763 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 12:14:32.765 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 12:14:32.765 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 12:14:32.873 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 12:14:32.873 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 12:14:32.874 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 12:14:32.874 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:14:32.882 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"3ms","timestamp":"2025-06-03 12:14:32.973 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 12:14:32.977 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 12:14:32.978 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:14:32.979 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 12:14:32.979 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:14:32.979 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 12:14:32.983 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 12:14:32.983 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 12:14:33.084 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 12:14:33.084 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 12:14:33.084 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 12:14:33.085 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 12:14:33.085 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 12:14:33.085 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 12:14:33.085 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:14:33.091 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 12:14:33.093 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 12:14:33.093 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 12:14:33.093 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 12:14:33.093 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 12:14:33.094 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 12:14:33.094 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 12:14:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 12:14:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 12:14:33.095 PM"}
âœ… Server started successfully on port 4000
[INFO] 12:21:02 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 12:21:02.554 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:21:02.561 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:21:02.561 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 12:21:02.562 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 12:21:02.573 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 12:21:02.574 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 12:21:02.581 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 12:21:03.583 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 12:21:03.583 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 12:21:03.584 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 12:21:03.585 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:21:03.592 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:21:03.593 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 12:21:03.597 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 12:21:03.598 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 12:21:04.330 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:21:05.114 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 12:21:05.116 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 12:21:05.116 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 12:21:05.218 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 12:21:05.219 PM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 12:21:05.219 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:05.221 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 12:21:05.221 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 12:21:05.258 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 12:21:05.264 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 12:21:05.264 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:21:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 12:21:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:21:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 12:21:05.270 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 12:21:05.270 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 12:21:05.371 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 12:21:05.371 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 12:21:05.371 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 12:21:05.372 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 12:21:05.372 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 12:21:05.372 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 12:21:05.372 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:05.378 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 12:21:05.380 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 12:21:05.380 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 12:21:05.380 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 12:21:05.380 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 12:21:05.381 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 12:21:05.381 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 12:21:05.381 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 12:21:05.381 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 12:21:05.381 PM"}
âœ… Server started successfully on port 4000
[INFO] 12:25:41 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 12:25:41.076 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:25:41.077 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:25:41.078 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 12:25:41.078 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 12:25:41.081 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 12:25:41.081 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 12:25:41.086 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 12:25:42.088 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 12:25:42.088 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 12:25:42.089 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 12:25:42.090 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:25:42.097 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:25:42.097 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 12:25:42.098 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 12:25:42.099 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 12:25:42.830 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:25:43.557 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 12:25:43.558 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 12:25:43.559 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 12:25:43.662 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 12:25:43.662 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 12:25:43.663 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:25:43.664 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 12:25:43.665 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 12:25:43.699 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 12:25:43.703 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 12:25:43.703 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:25:43.705 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 12:25:43.705 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:25:43.705 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 12:25:43.709 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 12:25:43.709 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 12:25:43.810 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 12:25:43.810 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 12:25:43.810 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 12:25:43.811 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 12:25:43.811 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 12:25:43.811 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 12:25:43.811 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:25:43.818 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 12:25:43.819 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 12:25:43.819 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 12:25:43.819 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 12:25:43.819 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 12:25:43.820 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 12:25:43.820 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 12:25:43.820 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 12:25:43.820 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 12:25:43.820 PM"}
âœ… Server started successfully on port 4000
[INFO] 12:36:56 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 12:36:56.656 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:36:56.682 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:36:56.682 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 12:36:56.688 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 12:36:56.702 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 12:36:56.702 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 12:36:56.710 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 12:36:57.711 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 12:36:57.712 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 12:36:57.714 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 12:36:57.714 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:36:57.721 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:36:57.721 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 12:36:57.726 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 12:36:57.727 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 12:36:58.511 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:36:59.308 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 12:36:59.310 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 12:36:59.310 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 12:36:59.412 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 12:36:59.412 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 12:36:59.413 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 12:36:59.414 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:36:59.414 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 12:36:59.456 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 12:36:59.462 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 12:36:59.463 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:36:59.464 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 12:36:59.464 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:36:59.464 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 12:36:59.468 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 12:36:59.468 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 12:36:59.569 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 12:36:59.570 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 12:36:59.570 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 12:36:59.570 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 12:36:59.571 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 12:36:59.571 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 12:36:59.571 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:36:59.578 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 12:36:59.579 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 12:36:59.579 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 12:36:59.579 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 12:36:59.579 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 12:36:59.580 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 12:36:59.580 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 12:36:59.580 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 12:36:59.580 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 12:36:59.580 PM"}
âœ… Server started successfully on port 4000
[INFO] 12:37:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 12:37:26.775 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:37:26.776 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:37:26.776 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 12:37:26.776 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 12:37:26.780 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 12:37:26.781 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 12:37:26.782 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 12:37:27.783 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 12:37:27.783 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 12:37:27.784 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 12:37:27.784 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:37:27.789 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 12:37:27.789 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 12:37:27.790 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 12:37:27.790 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 12:37:28.339 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:37:28.974 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 12:37:28.976 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 12:37:28.976 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 12:37:29.060 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 12:37:29.061 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 12:37:29.061 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:37:29.063 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 12:37:29.063 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 12:37:29.081 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 12:37:29.086 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 12:37:29.086 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 12:37:29.087 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 12:37:29.087 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 12:37:29.087 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 12:37:29.091 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 12:37:29.091 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 12:37:29.193 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 12:37:29.193 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 12:37:29.193 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 12:37:29.194 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 12:37:29.194 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 12:37:29.194 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 12:37:29.194 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:37:29.200 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 12:37:29.202 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 12:37:29.202 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 12:37:29.202 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 12:37:29.202 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 12:37:29.203 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 12:37:29.203 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 12:37:29.203 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 12:37:29.203 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 12:37:29.203 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:10:30 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:10:30.265 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:10:30.298 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:10:30.301 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:10:30.304 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:10:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:10:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:10:30.346 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:10:31.348 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:10:31.350 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:10:31.354 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:10:31.354 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:10:31.362 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:10:31.362 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:10:31.367 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:10:31.368 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:10:32.064 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:10:32.823 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:10:32.825 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:10:32.825 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:10:32.939 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:10:32.940 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:10:32.940 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:32.943 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:10:32.943 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 01:10:32.981 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:10:32.988 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:10:32.988 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:10:32.989 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:10:32.989 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:10:32.989 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:10:32.994 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:10:32.994 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:10:33.094 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:10:33.094 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:10:33.094 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:10:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:10:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:10:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:10:33.095 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:33.102 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:10:33.103 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:10:33.103 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:10:33.103 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:10:33.103 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:10:33.104 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:10:33.104 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:10:33.105 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:10:33.105 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:10:33.105 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:14:49 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:14:49.121 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:14:49.123 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:14:49.123 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:14:49.123 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:14:49.128 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:14:49.128 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:14:49.131 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:14:50.132 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:14:50.133 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:14:50.134 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:14:50.134 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:14:50.142 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:14:50.142 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:14:50.146 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:14:50.146 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:14:50.885 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:14:51.822 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:14:51.824 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:14:51.824 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:14:52.115 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:14:52.115 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:14:52.116 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:14:52.117 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:14:52.428 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 01:14:52.690 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:14:52.696 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:14:52.696 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:14:52.697 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:14:52.698 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:14:52.698 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:14:52.701 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:14:52.701 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:14:52.803 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:14:52.803 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:14:52.803 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:14:52.804 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:14:52.804 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:14:52.804 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:14:52.804 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:14:52.810 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:14:52.813 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:14:52.813 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:14:52.813 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:14:52.813 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:14:52.814 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:14:52.814 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:14:52.814 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:14:52.814 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:14:52.814 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:15:02 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:15:02.665 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:02.665 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:02.665 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:15:02.665 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:15:02.667 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:15:02.667 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:15:02.668 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:15:03.669 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:15:03.669 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:15:03.670 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:15:03.670 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:03.676 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:03.676 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:15:03.677 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:15:03.677 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:15:04.214 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:04.822 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:15:04.824 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:15:04.824 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:15:04.910 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:15:04.911 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:15:04.911 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:04.911 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:15:04.912 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 01:15:04.929 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:15:04.932 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:15:04.933 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:04.934 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:15:04.934 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:04.934 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:15:04.938 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:15:04.938 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:15:05.039 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:15:05.039 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:15:05.039 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:15:05.040 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:15:05.040 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:15:05.040 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:15:05.040 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:05.046 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:15:05.048 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:15:05.048 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:15:05.048 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:15:05.048 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:15:05.049 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:15:05.049 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:15:05.049 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:15:05.049 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:15:05.049 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:15:19 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/controllers/auth-rs256.controller.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:15:19.805 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:19.806 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:19.806 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:15:19.806 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:15:19.808 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:15:19.808 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:15:19.809 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:15:20.810 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:15:20.810 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:15:20.811 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:15:20.811 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:20.817 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:20.817 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:15:20.817 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:15:20.817 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:15:21.356 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:21.974 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:15:21.975 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:15:21.975 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:15:22.031 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:22.031 PM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:15:22.033 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:15:22.033 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:15:22.034 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 01:15:22.055 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:15:22.060 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:15:22.060 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:22.061 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:15:22.061 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:22.061 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:15:22.065 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:15:22.065 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:15:22.166 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:15:22.166 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:15:22.166 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:15:22.167 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:15:22.167 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:15:22.167 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:15:22.167 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:22.174 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:15:22.175 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:15:22.175 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:15:22.175 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:15:22.175 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:15:22.176 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:15:22.176 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:15:22.176 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:15:22.176 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:15:22.176 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:15:35 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/controllers/auth-rs256.controller.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:15:35.316 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:35.317 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:35.317 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:15:35.317 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:15:35.319 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:15:35.320 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:15:35.322 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:15:36.323 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:15:36.324 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:15:36.324 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:15:36.324 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:36.329 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:36.329 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:15:36.330 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:15:36.331 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:15:36.880 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:37.582 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:15:37.583 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:15:37.584 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-03 01:15:37.637 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-03 01:15:37.637 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-03 01:15:37.638 PM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-03 01:15:37.638 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:15:37.688 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:15:37.688 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:15:37.689 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:37.689 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:15:37.689 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 01:15:37.709 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:15:37.713 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:15:37.713 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:37.715 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:15:37.715 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:37.715 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:15:37.718 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:15:37.718 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:15:37.819 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:15:37.819 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:15:37.820 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:15:37.820 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:15:37.820 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:15:37.820 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:15:37.821 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:37.827 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:15:37.827 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:15:37.827 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:15:37.827 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:15:37.827 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:15:37.828 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:15:37.828 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:15:37.828 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:15:37.828 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:15:37.828 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:15:44 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/controllers/auth-rs256.controller.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:15:44.540 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:44.540 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:44.540 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:15:44.540 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:15:44.544 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:15:44.545 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:15:44.546 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:15:45.548 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:15:45.548 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:15:45.548 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:15:45.549 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:45.553 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:15:45.553 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:15:45.554 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:15:45.554 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:15:46.148 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:46.747 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:15:46.748 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:15:46.749 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-03 01:15:46.762 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-03 01:15:46.763 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-03 01:15:46.763 PM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-03 01:15:46.763 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:15:46.805 PM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:15:46.810 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:15:46.810 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:46.810 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:15:46.811 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 01:15:46.832 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:15:46.836 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:15:46.836 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:15:46.837 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:15:46.838 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:15:46.838 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:15:46.841 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:15:46.841 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:15:46.943 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:15:46.943 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:15:46.943 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:15:46.944 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:15:46.944 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:15:46.944 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:15:46.944 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:15:46.950 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:15:46.952 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:15:46.952 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:15:46.952 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:15:46.952 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:15:46.952 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:15:46.952 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:15:46.953 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:15:46.953 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:15:46.953 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:16:27 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:16:27.603 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:27.604 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:27.604 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:16:27.604 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:16:27.606 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:16:27.606 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:16:27.607 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:16:28.609 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:16:28.609 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:16:28.609 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:16:28.610 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:16:28.614 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:16:28.614 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:16:28.615 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:16:28.615 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:16:29.260 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:16:29.944 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:16:29.946 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:16:29.946 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-03 01:16:29.966 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-03 01:16:29.967 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-03 01:16:29.967 PM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-03 01:16:29.967 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:16:30.014 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:16:30.014 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:16:30.015 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:16:30.015 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:16:30.015 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 01:16:30.032 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:16:30.036 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:16:30.037 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:30.038 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:16:30.038 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:16:30.038 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:16:30.041 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:16:30.041 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:16:30.143 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:16:30.143 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:16:30.143 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:16:30.144 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:16:30.144 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:16:30.144 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:16:30.144 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:16:30.150 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:16:30.153 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:16:30.153 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:16:30.153 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:16:30.153 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:16:30.153 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:16:30.153 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:16:30.154 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:16:30.154 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:16:30.154 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:16:32 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:16:32.094 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:32.094 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:32.094 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:16:32.094 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:16:32.098 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:16:32.098 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:16:32.099 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:16:33.100 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:16:33.100 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:16:33.100 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:16:33.101 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:16:33.105 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:16:33.106 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:16:33.106 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:16:33.106 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:16:33.458 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:16:33.813 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:16:33.815 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:16:33.815 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-03 01:16:33.825 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-03 01:16:33.825 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-03 01:16:33.825 PM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-03 01:16:33.825 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:16:33.882 PM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:16:33.883 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:16:33.883 PM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:16:33.883 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:16:33.884 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 01:16:33.902 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:16:33.906 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:16:33.906 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:16:33.907 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:16:33.907 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:16:33.907 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:16:33.911 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:16:33.911 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:16:34.012 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:16:34.012 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:16:34.012 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:16:34.013 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:16:34.013 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:16:34.013 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:16:34.013 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:16:34.019 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:16:34.021 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:16:34.021 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:16:34.022 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:16:34.022 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:16:34.022 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:16:34.022 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:16:34.023 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:16:34.023 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:16:34.023 PM"}
âœ… Server started successfully on port 4000
[INFO] 13:17:27 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email/providers/SendGridProvider.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 01:17:27.826 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:17:27.827 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:17:27.827 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 01:17:27.827 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 01:17:27.830 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 01:17:27.831 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 01:17:27.831 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 01:17:28.832 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 01:17:28.832 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 01:17:28.833 PM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-03 01:17:28.833 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:17:28.839 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 01:17:28.839 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 01:17:28.840 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 01:17:28.840 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 01:17:29.455 PM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:17:30.127 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 01:17:30.128 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 01:17:30.129 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-03 01:17:30.147 PM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-03 01:17:30.147 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-03 01:17:30.147 PM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-03 01:17:30.147 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 01:17:30.191 PM"}
Redis client connected successfully in rate-limit middleware
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 01:17:30.195 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 01:17:30.196 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:17:30.196 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 01:17:30.196 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 01:17:30.219 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 01:17:30.223 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 01:17:30.223 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 01:17:30.224 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 01:17:30.224 PM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-03 01:17:30.224 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 01:17:30.228 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 01:17:30.228 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 01:17:30.329 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 01:17:30.329 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 01:17:30.329 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 01:17:30.330 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 01:17:30.330 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 01:17:30.330 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 01:17:30.330 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:17:30.335 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 01:17:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 01:17:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 01:17:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 01:17:30.337 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 01:17:30.344 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 01:17:30.344 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 01:17:30.345 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 01:17:30.345 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 01:17:30.345 PM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:27:48.980 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:27:54.960 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:29:10.183 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:29:16.176 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:29:21.531 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:29:27.531 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:00:30.067 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:00:36.068 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:07:23.171 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:07:29.169 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:11:24.204 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:11:24.204 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:11:30.206 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:11:30.206 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:15:10.191 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:15:16.193 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 02:17:54.018 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 02:17:54.032 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 02:17:54.033 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 02:17:54.033 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:18:27.097 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:18:33.102 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:55:34.172 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:55:40.166 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:55:57.098 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:56:03.035 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:56:25.403 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:56:31.404 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:58:10.590 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:58:16.584 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:58:39.135 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:58:45.134 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:16:25.586 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:16:25.588 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 03:27:23.551 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 03:27:23.553 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 03:27:23.553 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 03:27:23.553 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:43:23.534 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:43:23.534 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:44:17.443 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:44:23.456 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:44:46.775 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:44:52.776 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:45:40.894 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:45:46.894 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:46:25.347 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:46:31.535 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:47:13.162 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:47:19.160 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:47:46.377 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:47:52.378 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:48:29.767 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:48:35.770 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:49:14.641 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:49:20.644 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:49:53.469 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:49:59.467 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:50:45.890 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:50:51.887 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:13.428 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:19.428 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:44.157 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:50.157 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:52:07.508 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:52:07.509 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:52:13.503 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:52:20.370 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:52:26.373 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:53:02.687 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:53:08.687 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1423ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 03:59:27.917 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1423ms[39m {"timestamp":"2025-06-03 03:59:27.932 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1423ms[39m {"operationName":"select","timestamp":"2025-06-03 03:59:27.933 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1432ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 03:59:27.934 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1432ms[39m {"timestamp":"2025-06-03 03:59:27.934 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1432ms[39m {"operationName":"select","timestamp":"2025-06-03 03:59:27.934 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1432ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 03:59:27.934 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1432ms[39m {"timestamp":"2025-06-03 03:59:27.936 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1432ms[39m {"operationName":"select","timestamp":"2025-06-03 03:59:27.936 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 04:32:23.310 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 04:32:23.313 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 04:32:23.314 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 04:32:23.317 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:32:24.317 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:40:58.265 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:41:04.179 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:41:26.141 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:41:32.088 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:45:22.107 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:45:28.089 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:55:19.024 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1808ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 04:55:19.128 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1808ms[39m {"timestamp":"2025-06-03 04:55:19.137 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1808ms[39m {"operationName":"select","timestamp":"2025-06-03 04:55:19.138 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1850ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 04:55:19.153 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1850ms[39m {"timestamp":"2025-06-03 04:55:19.154 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1850ms[39m {"operationName":"select","timestamp":"2025-06-03 04:55:19.154 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"1850ms","params":"[]","query":"SELECT 1","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-03 04:55:19.154 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 1850ms[39m {"timestamp":"2025-06-03 04:55:19.154 PM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 1850ms[39m {"operationName":"select","timestamp":"2025-06-03 04:55:19.154 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:55:24.850 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:03:45.090 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:03:51.093 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:21:42.642 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 05:33:10.699 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 05:33:10.700 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 05:33:10.700 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 05:33:10.700 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:33:11.727 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:33:17.727 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:58:44.004 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:58:44.006 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:58:50.019 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:58:50.025 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:59:54.566 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:00.559 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:23.217 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:29.218 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:08.787 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:08.788 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:14.722 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:14.723 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:51.796 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:01:57.792 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:03:15.459 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:03:21.469 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:10:47.855 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:10:53.853 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:12:27.707 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:12:33.708 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:12:50.563 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:12:56.565 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:13:06.950 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:13:12.952 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:13:30.817 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:13:36.818 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:22:54.992 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:23:00.999 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:27:30.755 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:27:36.754 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 06:46:39.650 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 06:46:39.652 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 06:46:39.652 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 06:46:39.652 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:46:40.672 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:46:40.672 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:14:39.663 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:45:50.419 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:45:50.419 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:45:56.422 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:45:56.423 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 08:02:16.462 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 08:02:16.464 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 08:02:16.464 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 08:02:16.465 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:13.200 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:24:19.191 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:40:30.476 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:36.109 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:44:42.107 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:01.443 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:07.439 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:48.484 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:45:54.480 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:53:09.072 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:53:15.073 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 09:08:13.558 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 09:08:13.558 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 09:08:13.559 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 09:08:13.559 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:08:14.614 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:24:04.630 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:24:10.639 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:24:16.910 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:24:22.918 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:27:31.818 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:27:37.816 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:41.162 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:41.163 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:47.165 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:37:47.167 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:51:34.063 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:51:40.060 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:51:46.939 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 09:51:52.938 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:06:07.986 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:06:14.052 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:06:20.060 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 10:13:00.656 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 10:13:00.656 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 10:13:00.656 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 10:13:00.657 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:30:35.333 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:30:35.333 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:30:41.331 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:30:41.332 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:35:29.414 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:35:35.416 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:35:50.169 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:35:56.170 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:46:25.538 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:46:31.394 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:57:33.214 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:57:33.215 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:57:39.208 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 10:57:39.209 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:07:18.484 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:07:18.485 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:07:24.489 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:07:24.489 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 11:15:22.763 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 11:15:22.764 PM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 11:15:22.765 PM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 11:15:22.765 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:15:23.796 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:15:23.796 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:15:29.769 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:15:29.771 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:22:21.863 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:22:21.864 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:22:27.878 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:22:27.878 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:23:04.104 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:23:10.107 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:24:38.805 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:24:44.807 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:25:25.781 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:25:31.776 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:36:28.539 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:36:34.532 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:37:01.694 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:37:07.695 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:40:20.539 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:40:20.540 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:40:26.549 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:40:26.551 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:41:44.394 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:41:50.396 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:42:20.252 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:42:26.248 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:43:27.579 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:43:33.581 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:46:13.990 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:46:19.997 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:47:25.393 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:47:31.390 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:49:18.878 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:49:24.880 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:51:53.280 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 11:51:59.281 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:00:31.314 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:00:37.320 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:12:42.163 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:12:48.161 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 12:21:54.491 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 12:21:54.492 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 12:21:54.492 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 12:21:54.492 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:21:55.508 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:22:01.508 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:31:58.866 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:31:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:32:04.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:32:04.872 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:48:25.446 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:48:25.447 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:48:31.448 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 12:48:31.448 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:00:31.390 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:00:37.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:12:04.152 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:12:10.154 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 01:22:05.458 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 01:22:05.459 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 01:22:05.459 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 01:22:05.460 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:22:06.477 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:22:12.465 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:49:25.385 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:49:25.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:49:31.390 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 01:49:31.471 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:12:13.362 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:12:13.365 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:12:19.364 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:12:19.364 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 02:22:12.632 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 02:22:12.634 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 02:22:12.634 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 02:22:12.635 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:32:13.877 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:32:19.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:42:14.323 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:42:20.317 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:50:25.402 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:52:14.751 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:52:14.755 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:52:20.750 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 02:52:20.750 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 03:22:23.079 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 03:22:23.079 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 03:22:23.079 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 03:22:23.079 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:22:24.171 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:22:24.171 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:22:30.092 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:22:30.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:52:24.405 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 03:52:30.408 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:00:41.748 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:00:47.748 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:12:29.250 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:12:35.246 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 04:22:32.750 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 04:22:32.750 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 04:22:32.750 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 04:22:32.750 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:22:33.769 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:22:39.745 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:52:25.482 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:52:25.483 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:52:31.485 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 04:52:31.487 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:00:41.230 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:00:41.231 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:00:47.234 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:00:47.234 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 05:22:48.372 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 05:22:48.386 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 05:22:48.386 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 05:22:48.413 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:22:49.457 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:22:49.457 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:22:55.384 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:22:55.384 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:42:54.032 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 05:42:54.033 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:00:41.191 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:00:41.193 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:00:47.190 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:00:47.191 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:17:01.523 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:17:01.533 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected[39m {"duration":"3986ms","params":"[]","query":"SELECT 1, NOW() as timestamp, version() as db_version","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-04 06:17:02.362 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow select query detected: 3986ms[39m {"timestamp":"2025-06-04 06:17:02.368 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 3986ms[39m {"operationName":"select","timestamp":"2025-06-04 06:17:02.368 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:17:07.250 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:17:07.267 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected[39m {"duration":"10952ms","params":"[]","query":"\n        SELECT \n          count(*) as total_connections,\n          count(*) FILTER (WHERE state = 'active') as active_connections,\n          count(*) FILTER (WHERE state = 'idle') as idle_connections...","target":"quaint::connector::metrics","threshold":1000,"timestamp":"2025-06-04 06:17:09.276 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow [39m
[33m query detected: 10952ms[39m {"timestamp":"2025-06-04 06:17:09.288 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow query detected: 10952ms[39m {"operationName":"\n","timestamp":"2025-06-04 06:17:09.289 AM"}
[33m[33mwarn[33m[39m: 	[33mSlow health check detected: 11044ms[39m {"checks":[{"reason":"success","status":"fulfilled"},{"reason":"success","status":"fulfilled"},{"reason":"success","status":"fulfilled"}],"timestamp":"2025-06-04 06:17:09.304 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-04 06:22:48.209 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-04 06:22:48.219 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-04 06:22:48.220 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-04 06:22:48.221 AM"}
[INFO] 06:25:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-04 06:25:10.660 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:10.663 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:10.664 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-04 06:25:10.665 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-04 06:25:10.744 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-04 06:25:10.746 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-04 06:25:10.756 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-04 06:25:11.757 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-04 06:25:11.759 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-04 06:25:11.767 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:11.779 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:11.779 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-04 06:25:11.787 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-04 06:25:11.789 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-04 06:25:13.022 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:13.802 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-04 06:25:13.803 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-04 06:25:13.803 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-04 06:25:13.833 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-04 06:25:13.833 AM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-04 06:25:13.833 AM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-04 06:25:13.833 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-04 06:25:13.930 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-04 06:25:13.930 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-04 06:25:13.931 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:13.932 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-04 06:25:13.934 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-04 06:25:13.990 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-04 06:25:13.995 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-04 06:25:13.995 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:13.997 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-04 06:25:13.997 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:13.997 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-04 06:25:14.000 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-04 06:25:14.000 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-04 06:25:14.101 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-04 06:25:14.101 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-04 06:25:14.102 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-04 06:25:14.102 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-04 06:25:14.102 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-04 06:25:14.102 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-04 06:25:14.102 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:14.108 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-04 06:25:14.110 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-04 06:25:14.110 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-04 06:25:14.110 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-04 06:25:14.110 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-04 06:25:14.110 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-04 06:25:14.111 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-04 06:25:14.111 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-04 06:25:14.111 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-04 06:25:14.111 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:25:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/routes/auth-rs256.routes.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-04 06:25:27.209 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:27.214 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:27.214 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-04 06:25:27.214 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-04 06:25:27.244 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-04 06:25:27.245 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-04 06:25:27.258 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-04 06:25:28.260 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-04 06:25:28.263 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-04 06:25:28.267 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-04 06:25:28.272 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:28.284 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:28.284 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-04 06:25:28.290 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-04 06:25:28.292 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-04 06:25:30.318 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:31.536 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-04 06:25:31.538 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-04 06:25:31.538 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-04 06:25:31.590 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-04 06:25:31.590 AM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-04 06:25:31.590 AM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-04 06:25:31.590 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-04 06:25:31.729 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-04 06:25:31.730 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-04 06:25:31.731 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:31.736 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-04 06:25:31.736 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"2ms","timestamp":"2025-06-04 06:25:31.801 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-04 06:25:31.808 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-04 06:25:31.809 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:31.811 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-04 06:25:31.811 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:31.811 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-04 06:25:31.816 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-04 06:25:31.816 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-04 06:25:31.917 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-04 06:25:31.917 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-04 06:25:31.918 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-04 06:25:31.919 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-04 06:25:31.919 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-04 06:25:31.919 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-04 06:25:31.919 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:31.926 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-04 06:25:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-04 06:25:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-04 06:25:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-04 06:25:31.927 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-04 06:25:31.928 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-04 06:25:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-04 06:25:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-04 06:25:31.928 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-04 06:25:31.928 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:25:32 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-04 06:25:32.962 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:32.963 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:32.963 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-04 06:25:32.963 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-04 06:25:32.966 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-04 06:25:32.966 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-04 06:25:32.967 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-04 06:25:33.969 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-04 06:25:33.970 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-04 06:25:33.978 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-04 06:25:33.979 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:33.985 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:33.985 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-04 06:25:33.986 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-04 06:25:33.987 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-04 06:25:34.552 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:34.951 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-04 06:25:34.953 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-04 06:25:34.953 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-04 06:25:34.968 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-04 06:25:34.968 AM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-04 06:25:34.969 AM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-04 06:25:34.969 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-04 06:25:35.023 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
Redis client connected successfully in rate-limit middleware
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-04 06:25:35.027 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-04 06:25:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-04 06:25:35.028 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-04 06:25:35.041 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-04 06:25:35.045 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-04 06:25:35.045 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:35.046 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-04 06:25:35.046 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:35.046 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-04 06:25:35.049 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-04 06:25:35.049 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-04 06:25:35.151 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-04 06:25:35.151 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-04 06:25:35.151 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-04 06:25:35.152 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-04 06:25:35.152 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-04 06:25:35.152 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-04 06:25:35.152 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:35.158 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-04 06:25:35.161 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-04 06:25:35.161 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-04 06:25:35.161 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-04 06:25:35.161 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-04 06:25:35.162 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-04 06:25:35.162 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-04 06:25:35.162 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-04 06:25:35.162 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-04 06:25:35.162 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:25:45 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/controllers/auth-rs256.controller.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-04 06:25:46.024 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:46.025 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:46.025 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-04 06:25:46.026 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-04 06:25:46.029 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-04 06:25:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-04 06:25:46.030 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-04 06:25:47.031 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-04 06:25:47.032 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-04 06:25:47.032 AM"}
[33m[33mwarn[33m[39m: 	[33mRedis connection closed - queue functionality disabled[39m {"timestamp":"2025-06-04 06:25:47.033 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:47.040 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-04 06:25:47.041 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-04 06:25:47.041 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-04 06:25:47.041 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-04 06:25:47.724 AM"}
AuthRateLimiter using memory backend
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:48.370 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-04 06:25:48.372 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-04 06:25:48.372 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid API key not found in environment variables[39m {"timestamp":"2025-06-04 06:25:48.388 AM"}
[33m[33mwarn[33m[39m: 	[33mSendGrid validation failed: SENDGRID_API_KEY not set[39m {"timestamp":"2025-06-04 06:25:48.388 AM"}
[33m[33mwarn[33m[39m: 	[33mEmail provider SendGrid configuration is invalid[39m {"timestamp":"2025-06-04 06:25:48.388 AM"}
[32m[32minfo[32m[39m: 	[32mEmail service initialized with SendGrid provider[39m {"timestamp":"2025-06-04 06:25:48.388 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-04 06:25:48.441 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-04 06:25:48.442 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-04 06:25:48.442 AM"}
Redis client connected successfully in rate-limit middleware
Upgraded rate limiters to use Redis
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:48.442 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-04 06:25:48.443 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-04 06:25:48.467 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-04 06:25:48.470 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-04 06:25:48.470 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-04 06:25:48.472 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-04 06:25:48.472 AM"}
[32m[32minfo[32m[39m: 	[32mConnecting to Redis for queue: redis://localhost:6379[39m {"timestamp":"2025-06-04 06:25:48.472 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-04 06:25:48.475 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-04 06:25:48.475 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-04 06:25:48.577 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-04 06:25:48.577 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-04 06:25:48.577 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-04 06:25:48.578 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-04 06:25:48.578 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-04 06:25:48.578 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-04 06:25:48.578 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 06:25:48.584 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-04 06:25:48.589 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-04 06:25:48.589 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-04 06:25:48.589 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-04 06:25:48.589 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-04 06:25:48.589 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-04 06:25:48.589 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-04 06:25:48.590 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-04 06:25:48.590 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-04 06:25:48.590 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-04 07:17:19.546 AM"}
