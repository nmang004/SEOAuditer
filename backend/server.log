
> seo-director-backend@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 23:25:41 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.8.3)
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:25:42.556 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:25:43.609 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:25:43.609 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:25:43.768 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:25:43.768 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:25:43.770 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:25:43.779 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:25:43.835 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:25:43.841 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:25:43.841 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:25:43.848 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:25:43.848 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:25:43.855 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:25:43.855 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:25:43.957 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:25:43.958 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:25:43.965 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:25:43.966 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:25:43.966 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:25:43.967 PM"}
âœ… Server started successfully on port 4000
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 53 (line 1 column 54)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:26:49.998 PM"}
[0mPOST /api/auth/register [33m400[0m 6.969 ms - 395[0m
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 53 (line 1 column 54)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:27:11.730 PM"}
[31m[31merror[31m[39m: 	[31mError verifying email transporter: getaddrinfo ENOTFOUND smtp.example.com[39m {"code":"EDNS","command":"CONN","errno":-3008,"hostname":"smtp.example.com","stack":"Error: getaddrinfo ENOTFOUND smtp.example.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)","syscall":"getaddrinfo","timestamp":"2025-06-02 11:27:29.545 PM"}
[31m[31merror[31m[39m: 	[31mFailed to initialize email service: Failed to initialize email service[39m {"stack":"Error: Failed to initialize email service\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email.service.ts:116:18\n    at SMTPConnection.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-transport/index.js:347:24)\n    at Object.onceWrapper (node:events:633:26)\n    at SMTPConnection.emit (node:events:518:28)\n    at SMTPConnection._onError (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:799:14)\n    at Immediate.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:344:52)\n    at processImmediate (node:internal/timers:485:21)","timestamp":"2025-06-02 11:27:29.552 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service will be disabled[39m {"timestamp":"2025-06-02 11:27:29.553 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:27:29.553 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921249217@example.com","timestamp":"2025-06-02 11:27:29.553 PM","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921249217@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:27:29.567 PM","userAgent":"axios/1.9.0","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921249217@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:27:29.567 PM","userId":"0be4fa68-6167-4710-9f90-291015b40dab"}
[0mPOST /api/auth/register [32m201[0m 338.268 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:27:29.579 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 8.735 ms - 166[0m
[0mGET /api/health [32m200[0m 0.930 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:32:01.036 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921520790@example.com","timestamp":"2025-06-02 11:32:01.037 PM","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921520790@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:32:01.043 PM","userAgent":"axios/1.9.0","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921520790@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:32:01.043 PM","userId":"5e3ec2d7-bb44-4495-892c-94411a3c065e"}
[0mPOST /api/auth/register [32m201[0m 251.820 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:32:01.047 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 2.814 ms - 166[0m
[0mPOST /api/auth/register [33m400[0m 0.618 ms - 1332[0m
[31m[31merror[31m[39m: 	[31m500 - Internal Server Error - /api/auth/register - POST - ::1[39m {"body":{},"error":"SyntaxError: Bad escaped character in JSON at position 59 (line 1 column 60)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","params":{},"query":{},"timestamp":"2025-06-02 11:32:14.688 PM"}

> seo-director-backend@1.0.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 23:34:23 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.8.3)
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:34:23.932 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:34:24.898 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:34:24.898 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:34:25.059 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:34:25.059 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:34:25.060 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:34:25.060 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:34:25.062 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:34:25.072 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:34:25.121 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:34:25.125 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:34:25.125 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:34:25.131 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:34:25.131 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:34:25.135 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:34:25.135 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:34:25.236 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:34:25.237 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:34:25.247 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:34:25.253 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:34:25.254 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:34:25.254 PM"}
âœ… Server started successfully on port 4000
[31m[31merror[31m[39m: 	[31mError verifying email transporter: getaddrinfo ENOTFOUND smtp.example.com[39m {"code":"EDNS","command":"CONN","errno":-3008,"hostname":"smtp.example.com","stack":"Error: getaddrinfo ENOTFOUND smtp.example.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)","syscall":"getaddrinfo","timestamp":"2025-06-02 11:36:39.553 PM"}
[31m[31merror[31m[39m: 	[31mFailed to initialize email service: Failed to initialize email service[39m {"stack":"Error: Failed to initialize email service\n    at /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/email.service.ts:116:18\n    at SMTPConnection.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-transport/index.js:347:24)\n    at Object.onceWrapper (node:events:633:26)\n    at SMTPConnection.emit (node:events:518:28)\n    at SMTPConnection._onError (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:799:14)\n    at Immediate.<anonymous> (/Users/nicholasmangubat/CascadeProjects/seodirector/backend/node_modules/nodemailer/lib/smtp-connection/index.js:344:52)\n    at processImmediate (node:internal/timers:485:21)","timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service will be disabled[39m {"timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:36:39.559 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921799225@example.com","timestamp":"2025-06-02 11:36:39.559 PM","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921799225@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:36:39.564 PM","userAgent":"axios/1.9.0","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921799225@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:36:39.564 PM","userId":"1f182777-c26d-4b5f-80f3-3e84b1063e2c"}
[0mPOST /api/auth/register [32m201[0m 309.208 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:36:39.584 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 16.031 ms - 166[0m
[0mGET /api/health [32m200[0m 0.448 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:36:50.292 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748921810054@example.com","timestamp":"2025-06-02 11:36:50.292 PM","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748921810054@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:36:50.293 PM","userAgent":"axios/1.9.0","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748921810054@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:36:50.293 PM","userId":"6e3a7f3c-95d1-4887-b101-5bfedce1e61e"}
[0mPOST /api/auth/register [32m201[0m 238.124 ms - 337[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:36:50.296 PM","userAgent":"axios/1.9.0","userId":null}
[0mPOST /api/auth/login [33m401[0m 1.832 ms - 166[0m
[0mPOST /api/auth/register [33m400[0m 1.152 ms - 1332[0m
[0mHEAD /api/health [32m200[0m 2.043 ms - 105[0m
[0mGET /api/health [32m200[0m 0.129 ms - 105[0m
[33m[33mwarn[33m[39m: 	[33mEmail service is not available, skipping email send[39m {"timestamp":"2025-06-02 11:44:43.257 PM"}
[33m[33mwarn[33m[39m: 	[33mEmail verification could not be sent[39m {"email":"test1748922282@example.com","timestamp":"2025-06-02 11:44:43.257 PM","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"test1748922282@example.com","event":"user_registered","ipAddress":"::1","timestamp":"2025-06-02 11:44:43.262 PM","userAgent":"curl/8.7.1","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[32m[32minfo[32m[39m: 	[32mUser registered successfully[39m {"email":"test1748922282@example.com","ipAddress":"::1","timestamp":"2025-06-02 11:44:43.263 PM","userId":"c86af706-5181-45db-b122-da8a731ce79c"}
[0mPOST /api/auth/register [32m201[0m 602.873 ms - 334[0m
[32m[32minfo[32m[39m: 	[32mSecurity event[39m {"email":"nonexistent@example.com","event":"login_failed","ipAddress":"::1","reason":"user_not_found","timestamp":"2025-06-02 11:45:06.220 PM","userAgent":"curl/8.7.1","userId":null}
[0mPOST /api/auth/login [33m401[0m 35.700 ms - 166[0m
[INFO] 23:50:02 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:02.571 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:02.573 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:02.574 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:02.575 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:02.584 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:02.585 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:02.593 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.596 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:03.596 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:03.598 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.606 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:03.606 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:03.609 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:03.610 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:04.391 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:05.138 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:05.138 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:05.263 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:05.264 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:05.264 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:05.264 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:05.266 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:05.320 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:05.326 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:05.326 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:05.328 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:05.328 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:05.331 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:05.331 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:05.433 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:05.434 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:05.442 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:05.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:05.444 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:05.444 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:05.445 PM"}
âœ… Server started successfully on port 4000
[INFO] 23:50:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:26.543 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:26.544 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:26.545 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:26.545 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:26.552 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:26.553 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:26.556 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.558 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:27.558 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:27.559 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.578 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:27.578 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:27.580 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:27.580 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:28.179 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:28.817 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:28.817 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:28.914 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:28.914 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:28.915 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:28.915 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:28.917 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:28.919 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:28.955 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:28.961 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:28.961 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:28.963 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:28.963 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:28.966 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:28.966 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:29.068 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:29.069 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:29.074 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:29.076 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:29.076 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:29.077 PM"}
âœ… Server started successfully on port 4000
[INFO] 23:50:40 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-02 11:50:40.070 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-02 11:50:40.071 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-02 11:50:40.072 PM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-02 11:50:40.072 PM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-02 11:50:40.073 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.074 PM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-02 11:50:41.074 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-02 11:50:41.075 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-02 11:50:41.081 PM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-02 11:50:41.081 PM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-02 11:50:41.606 PM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-02 11:50:42.218 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-02 11:50:42.218 PM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-02 11:50:42.304 PM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-02 11:50:42.304 PM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-02 11:50:42.305 PM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-02 11:50:42.305 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:42.306 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-02 11:50:42.308 PM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-02 11:50:42.324 PM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-02 11:50:42.328 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-02 11:50:42.328 PM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-02 11:50:42.329 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-02 11:50:42.330 PM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-02 11:50:42.333 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-02 11:50:42.333 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-02 11:50:42.434 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-02 11:50:42.435 PM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-02 11:50:42.435 PM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-02 11:50:42.436 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-02 11:50:42.441 PM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-02 11:50:42.443 PM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-02 11:50:42.444 PM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-02 11:50:42.444 PM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:08.733 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:21:14.765 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:41:13.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 12:41:19.330 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 12:51:12.278 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 12:51:12.279 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 12:51:12.279 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 12:51:12.280 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:01:13.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:01:19.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:14.451 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:10:20.463 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:21:18.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:21:24.506 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:31:18.064 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:31:24.062 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:41:18.445 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 01:41:24.447 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 01:51:22.235 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 01:51:22.239 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 01:51:22.240 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 01:51:22.241 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:01:14.531 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:01:20.585 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:31:33.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:31:39.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:41:34.434 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:41:40.436 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 02:51:35.619 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 02:51:35.620 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:45.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:45.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:51.606 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 02:52:51.606 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:43.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:43.549 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:49.558 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:31:49.559 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 03:51:44.901 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 03:51:44.902 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 03:51:44.902 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 03:51:44.903 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:45.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 03:51:51.925 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:01:46.663 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:10:25.340 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:10:31.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:21:53.735 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:21:59.749 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:23:20.628 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:23:26.635 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 04:53:50.574 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 04:53:50.575 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 04:53:51.588 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:02:46.508 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:02:52.512 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:20:50.474 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:51:07.049 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 05:51:12.974 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 completed jobs[39m {"timestamp":"2025-06-03 05:53:50.555 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned 0 failed jobs[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[32m[32minfo[32m[39m: 	[32mCleaned queue of jobs older than 86400000ms[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[32m[32minfo[32m[39m: 	[32mQueue cleanup completed[39m {"timestamp":"2025-06-03 05:53:50.557 AM"}
[INFO] 06:00:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:00:47.132 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:47.135 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:47.135 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:00:47.136 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:00:47.196 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:00:47.198 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:00:47.205 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.207 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:00:48.208 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:00:48.212 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.222 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:00:48.222 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:00:48.226 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:00:48.227 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:00:48.913 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:00:49.648 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:00:49.648 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:00:49.746 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:00:49.746 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:00:49.747 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:00:49.747 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:49.749 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:00:49.750 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:00:49.788 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:00:49.792 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:00:49.792 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:00:49.794 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:00:49.794 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:00:49.800 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:00:49.800 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:00:49.901 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:00:49.902 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:00:49.908 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:00:49.912 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:00:49.912 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:00:49.913 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:42.105 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:42.107 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:48.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:14:48.102 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:20:07.669 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:20:13.992 AM"}
[INFO] 06:30:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:30:33.092 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:33.096 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:33.096 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:30:33.097 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:30:33.110 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:30:33.111 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:30:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.120 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:30:34.121 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:30:34.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.133 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:30:34.133 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:30:34.137 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:30:34.138 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:30:34.818 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:30:35.547 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:30:35.547 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:30:36.078 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:30:36.078 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:30:36.079 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:30:36.079 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:30:36.081 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:30:36.081 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:30:36.126 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:30:36.133 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:30:36.133 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:30:36.134 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:30:36.134 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:30:36.138 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:30:36.138 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:30:36.239 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:30:36.240 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:30:36.247 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:30:36.248 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:30:36.249 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:30:36.249 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:45:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:45:10.155 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:10.157 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:10.158 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:45:10.158 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:45:10.166 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:45:10.167 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:45:10.173 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.175 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:45:11.176 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:45:11.177 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.184 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:11.184 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:45:11.187 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:45:11.188 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:45:11.949 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:45:12.703 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:45:12.703 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:45:12.799 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:45:12.800 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:45:12.801 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:45:12.801 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:12.804 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:45:12.804 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 06:45:12.841 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:45:12.846 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:45:12.846 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:12.847 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:45:12.847 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:45:12.864 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:45:12.864 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:45:12.966 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:45:12.967 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:12.973 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:45:12.979 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:45:12.980 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:45:12.980 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:45:12.981 AM"}
âœ… Server started successfully on port 4000
[INFO] 06:45:53 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:53.785 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 06:45:53.786 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 06:45:53.789 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 06:45:53.789 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 06:45:53.791 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.792 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 06:45:54.792 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 06:45:54.793 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.799 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 06:45:54.799 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 06:45:54.800 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 06:45:54.800 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 06:45:55.445 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 06:45:56.160 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 06:45:56.161 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 06:45:56.253 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 06:45:56.253 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 06:45:56.254 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 06:45:56.274 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 06:45:56.278 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 06:45:56.278 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 06:45:56.279 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 06:45:56.280 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 06:45:56.283 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 06:45:56.283 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 06:45:56.384 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 06:45:56.384 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 06:45:56.385 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 06:45:56.386 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 06:45:56.386 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 06:45:56.391 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 06:45:56.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 06:45:56.396 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 06:45:56.396 AM"}
âœ… Server started successfully on port 4000
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:00:13.822 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:00:19.777 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:02:42.050 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:02:48.051 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:04:00.207 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:04:06.206 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:06:00.695 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:06:06.698 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:09:16.814 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:09:22.793 AM"}
[INFO] 07:24:17 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:24:17.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:17.869 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:17.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:24:17.871 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:24:17.888 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:24:17.889 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:24:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.899 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:24:18.900 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:24:18.903 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.910 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:24:18.910 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:24:18.917 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:24:18.920 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:24:19.559 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:24:20.585 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:24:20.585 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:24:20.773 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:24:20.773 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:20.774 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:24:20.782 AM"}
[INFO] 07:24:20 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/package.json has been modified
Process exiting with code: 0
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 0[39m {"timestamp":"2025-06-03 07:24:20.829 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:24:21.558 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:24:22.262 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:24:22.262 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:24:22.350 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:24:22.350 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:24:22.351 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:24:22.351 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:24:22.353 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:22.353 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:24:22.425 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:24:22.430 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:24:22.430 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:24:22.432 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:24:22.432 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:24:22.436 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:24:22.436 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:24:22.537 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:24:22.538 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:24:22.545 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:24:22.547 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:24:22.547 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:24:22.548 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:31:01 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:31:01.479 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:31:01.481 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:31:01.484 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:31:01.485 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:31:01.488 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.491 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:31:02.491 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:31:02.492 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.499 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:02.499 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:31:02.502 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:31:02.502 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:31:03.237 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:31:03.978 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:31:03.978 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:31:04.080 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:31:04.081 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:31:04.081 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:31:04.081 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:04.083 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:31:04.083 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:31:04.113 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:31:04.122 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:31:04.122 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:04.123 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:31:04.123 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:31:04.127 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:31:04.128 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:31:04.229 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:31:04.230 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:04.235 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:31:04.238 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:31:04.238 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:31:04.239 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:31:04.239 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:31:11 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:31:11.348 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:11.348 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:11.349 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:31:11.349 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:31:11.350 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:31:11.350 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:31:11.351 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:31:12.352 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.358 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:31:12.358 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:31:12.359 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:31:12.359 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:31:12.887 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:31:13.487 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:31:13.487 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:31:13.569 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:31:13.569 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:31:13.573 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:31:13.574 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:31:13.594 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:31:13.598 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:31:13.598 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:31:13.599 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:31:13.599 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:31:13.603 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:31:13.603 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:31:13.704 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:31:13.704 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:31:13.705 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:31:13.706 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:31:13.712 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:31:13.715 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:31:13.715 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:31:13.716 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:35:15 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:35:15.639 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:35:15.640 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:35:15.642 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:35:15.643 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:35:15.646 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.647 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:35:16.648 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:35:16.649 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.654 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:16.654 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:35:16.656 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:35:16.656 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:35:17.385 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:35:18.126 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:35:18.126 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:35:18.241 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:35:18.241 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:35:18.242 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:35:18.242 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:35:18.245 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:18.245 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:35:18.281 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:35:18.287 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:35:18.287 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:18.289 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:35:18.289 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:35:18.292 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:35:18.292 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:35:18.394 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:35:18.395 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:18.401 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:35:18.406 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:35:18.407 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:35:18.407 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:35:25 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/services/LighthouseService.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:35:25.866 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:35:25.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:35:25.890 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:35:25.890 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:35:25.891 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.893 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:35:26.893 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:35:26.894 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.901 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:35:26.901 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:35:26.902 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:35:26.902 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:35:27.529 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:35:28.171 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:35:28.171 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:35:28.296 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:35:28.297 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:35:28.297 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:35:28.297 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:28.298 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:35:28.299 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:35:28.400 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:35:28.447 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:35:28.447 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:35:28.449 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:35:28.449 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:35:28.453 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:35:28.453 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:35:28.554 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:35:28.555 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:35:28.561 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:35:28.563 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:35:28.565 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:35:28.565 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:35:28.565 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:35:28.566 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:35:28.566 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:17 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/config.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:17.245 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:17.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:17.248 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.250 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:18.250 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:18.251 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.258 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:18.258 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:18.259 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:18.259 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:18.906 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:19.600 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:19.600 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:19.699 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:19.699 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:19.699 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:19.700 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:19.701 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:19.702 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:19.734 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:19.739 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:19.739 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:19.741 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:19.741 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:19.744 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:19.745 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:19.846 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:19.847 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:19.853 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:19.855 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:19.856 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:19.856 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:31 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:31.704 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:31.705 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:31.706 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:31.706 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:31.707 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.708 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:32.708 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:32.709 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.715 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:32.715 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:32.716 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:32.716 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:33.260 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:33.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:33.868 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:33.955 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:33.956 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:33.957 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:33.974 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:33.977 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:33.977 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:33.979 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:33.979 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:33.982 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:33.982 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:34.090 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:34.093 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:34.093 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:34.094 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:40:49 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:40:49.100 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:40:49.101 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:40:49.102 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.103 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:40:50.103 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:40:50.104 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:40:50.110 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:40:50.110 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:40:50.649 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:40:51.245 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:40:51.245 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:40:51.326 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:40:51.326 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:40:51.331 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:40:51.332 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:40:51.349 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:40:51.354 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:40:51.354 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:40:51.355 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:40:51.356 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:40:51.359 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:40:51.359 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:40:51.461 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:40:51.462 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:40:51.469 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:40:51.470 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:40:51.471 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:40:51.471 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:41:52 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:41:52.397 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:41:52.398 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:41:52.403 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:41:52.403 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:41:52.404 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.405 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:41:53.405 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:41:53.406 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.412 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:53.412 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:41:53.413 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:41:53.413 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:41:54.052 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:41:54.719 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:41:54.719 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:41:54.811 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:41:54.811 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:41:54.812 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:41:54.812 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:41:54.832 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:41:54.836 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:41:54.837 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:54.838 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:41:54.838 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:41:54.842 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:41:54.842 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:41:54.943 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:41:54.944 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:41:54.950 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:41:54.953 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:41:54.953 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:41:54.954 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:41:58 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:41:58.865 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:41:58.868 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.869 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:41:59.869 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:41:59.870 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.876 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:41:59.876 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:41:59.877 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:41:59.877 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:00.446 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:01.023 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:01.023 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:01.108 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:01.108 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:01.109 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:01.111 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:01.124 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:01.127 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:01.127 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:01.129 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:01.129 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:01.133 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:01.133 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:01.234 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:01.235 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:01.244 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:01.245 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:01.246 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:01.246 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:01.247 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:42:15 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:42:15.586 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:42:15.587 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:42:15.589 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:42:15.589 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:42:15.590 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.591 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:42:16.591 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:42:16.592 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:42:16.598 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:42:16.598 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:17.120 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:17.688 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:17.688 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:17.768 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:17.769 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:17.770 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:17.785 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:17.788 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:17.789 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:17.790 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:17.790 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:17.794 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:17.794 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:17.895 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:17.896 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:17.902 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:17.906 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:17.906 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:17.907 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:42:26 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:42:26.989 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:42:26.990 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:42:26.993 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:42:26.993 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:42:26.996 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:42:27.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:28.004 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:42:28.004 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:42:28.005 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:42:28.005 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:42:28.536 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:42:29.156 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:42:29.156 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:42:29.236 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:42:29.236 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:42:29.237 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:42:29.237 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:29.241 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:42:29.241 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 07:42:29.263 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:42:29.267 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:42:29.267 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:42:29.268 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:42:29.268 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:42:29.272 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:42:29.272 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:42:29.373 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:42:29.374 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:42:29.379 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:42:29.382 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:42:29.382 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:42:29.383 AM"}
âœ… Server started successfully on port 4000
[INFO] 07:49:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 07:49:47.631 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 07:49:47.632 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 07:49:47.634 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 07:49:47.635 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 07:49:47.637 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.638 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 07:49:48.639 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 07:49:48.654 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.687 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 07:49:48.687 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 07:49:48.694 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 07:49:48.695 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 07:49:49.402 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 07:49:50.135 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 07:49:50.136 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 07:49:50.235 AM"}
[32m[32minfo[32m[39m: 	[32mRedis clients initialized for WebSocket gateway[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 07:49:50.235 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:49:50.237 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 07:49:50.239 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 07:49:50.272 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 07:49:50.279 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 07:49:50.279 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 07:49:50.281 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 07:49:50.281 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 07:49:50.284 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 07:49:50.285 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 07:49:50.386 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 07:49:50.387 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 07:49:50.392 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 07:49:50.395 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 07:49:50.395 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 07:49:50.396 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 07:49:50.396 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 07:49:50.397 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 07:49:50.397 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:07:34 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:07:34.080 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:34.084 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:34.085 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:07:34.086 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:07:34.104 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:07:34.106 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:07:34.114 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.116 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:07:35.116 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:07:35.120 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.127 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:07:35.127 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:07:35.132 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:07:35.132 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:07:35.941 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:07:36.647 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:07:36.647 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:07:36.748 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:07:36.749 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:07:36.749 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:07:36.750 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:07:36.752 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:07:36.785 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:07:36.792 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:07:36.792 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:07:36.793 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:07:36.793 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:07:36.797 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:07:36.797 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:07:36.898 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:07:36.898 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:07:36.899 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:07:36.905 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:07:36.907 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:07:36.907 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:07:36.908 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:07:36.908 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:08:47 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:08:47.888 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:08:47.889 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:08:47.892 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:08:47.892 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:08:47.896 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.897 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:08:48.897 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:08:48.899 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.904 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:08:48.904 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:08:48.905 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:08:48.905 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:08:49.654 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:08:50.446 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:08:50.446 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:08:50.544 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:08:50.544 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:08:50.545 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:08:50.546 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:08:50.548 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:08:50.578 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:08:50.585 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:08:50.585 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:08:50.586 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:08:50.586 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:08:50.590 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:08:50.590 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:08:50.692 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:08:50.693 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:08:50.701 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:08:50.702 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:08:50.703 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:08:50.703 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:09:10 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:10.273 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:09:10.274 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:09:10.277 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:09:10.277 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:09:10.278 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.279 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:09:11.279 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:09:11.280 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.286 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:11.286 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:09:11.287 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:09:11.287 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:09:11.821 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:09:12.529 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:09:12.529 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:09:12.633 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:09:12.634 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:09:12.634 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:12.635 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:09:12.635 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:09:12.654 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:09:12.657 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:09:12.657 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:12.659 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:09:12.659 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:09:12.662 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:09:12.662 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:09:12.764 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:09:12.765 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:12.771 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:09:12.776 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:09:12.777 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:09:12.777 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:09:30 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:09:30.934 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:09:30.936 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:09:30.936 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:09:30.937 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.938 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:09:31.938 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:09:31.939 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.945 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:09:31.945 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:09:31.946 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:09:31.946 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:09:32.499 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:09:33.097 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:09:33.097 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:09:33.182 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:09:33.183 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:09:33.184 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:33.184 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:09:33.184 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:09:33.203 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:09:33.207 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:09:33.207 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:09:33.209 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:09:33.209 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:09:33.213 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:09:33.213 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:09:33.314 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:09:33.315 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:09:33.320 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:09:33.323 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:09:33.324 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:09:33.324 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:10:28 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:10:28.173 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:10:28.174 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:10:28.177 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:10:28.177 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:10:28.178 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.179 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:10:29.179 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:10:29.180 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.186 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:10:29.186 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:10:29.190 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:10:29.191 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:10:29.886 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:10:30.593 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:10:30.593 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:10:30.685 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:10:30.685 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:10:30.686 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:10:30.686 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:10:30.688 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:10:30.706 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:10:30.710 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:10:30.711 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:10:30.712 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:10:30.712 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:10:30.716 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:10:30.716 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:10:30.818 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:10:30.819 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:10:30.825 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:10:30.826 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:10:30.827 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:10:30.827 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:01 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/index.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:01.544 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:01.546 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:01.548 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:01.548 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:01.549 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.551 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:02.551 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:02.555 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.562 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:02.562 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:02.562 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:02.563 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:03.167 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:03.789 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:03.789 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:03.876 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:03.876 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:03.877 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:03.877 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:03.877 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"1ms","timestamp":"2025-06-03 08:11:03.897 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:03.901 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:03.901 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:03.903 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:03.903 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:03.906 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:03.906 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:04.009 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:04.010 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:04.015 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:04.018 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:04.019 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:04.019 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:25 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:25.590 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:25.592 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:25.593 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:25.593 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:25.595 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:25.595 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:25.596 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.598 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:26.598 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:26.599 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.605 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:26.605 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:26.606 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:26.606 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:27.168 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:27.776 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:27.776 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:27.861 AM"}
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:27.862 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:27.862 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:27.862 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:27.864 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:27.884 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:27.888 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:27.888 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:27.890 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:27.890 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:27.894 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:27.894 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:27.995 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:27.996 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:28.003 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:28.006 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:28.006 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:28.007 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:33 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:33.119 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:33.120 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:33.120 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:33.122 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:33.123 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:33.124 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.124 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:34.124 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:34.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.131 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:34.132 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:34.132 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:34.132 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:34.710 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:35.292 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:35.292 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:35.375 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:35.375 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:35.376 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:35.391 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:35.395 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:35.395 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:35.396 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:35.396 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:35.400 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:35.400 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:35.500 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:35.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:35.507 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:35.509 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:35.510 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:35.510 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:11:42 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/ws/EnhancedWebSocketGateway.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:11:42.811 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:11:42.812 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:11:42.815 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.816 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:11:43.817 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:11:43.817 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.823 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:11:43.823 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:11:43.824 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:11:43.824 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:11:44.353 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:11:44.921 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:11:44.921 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:11:44.996 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:11:44.996 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:11:44.997 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:11:44.998 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:45.000 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:11:45.013 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:11:45.017 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:11:45.018 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:11:45.019 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:11:45.019 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:11:45.022 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:11:45.022 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:11:45.124 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:11:45.125 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:11:45.131 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:11:45.133 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:11:45.133 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:11:45.134 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:11:45.134 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:11:45.135 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:11:45.135 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:12:37 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:12:37.856 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:12:37.857 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:12:37.860 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:12:37.860 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:12:37.861 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.862 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:12:38.863 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:12:38.863 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.868 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:12:38.868 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:12:38.869 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:12:38.869 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:12:39.413 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:12:40.016 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:12:40.016 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:12:40.101 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:12:40.102 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:12:40.102 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:12:40.103 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:12:40.105 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:12:40.126 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:12:40.130 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:12:40.130 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:12:40.131 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:12:40.131 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:12:40.135 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:12:40.135 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:12:40.237 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:12:40.238 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:12:40.243 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:12:40.246 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:12:40.247 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:12:40.247 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:12:59 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/seo-crawler/queue/EnhancedQueueAdapter.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:13:00.042 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:00.044 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:00.044 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:13:00.045 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:13:00.052 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:13:00.052 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:13:00.053 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.054 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:13:01.054 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:13:01.055 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.061 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:01.061 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:13:01.062 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:13:01.062 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:13:01.652 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:13:02.269 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:13:02.270 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:13:02.358 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:13:02.358 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:13:02.358 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:13:02.359 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:02.361 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:13:02.377 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:13:02.382 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:13:02.382 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:02.384 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:13:02.384 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:13:02.387 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:13:02.387 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:13:02.489 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:13:02.490 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:02.497 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:13:02.501 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:13:02.502 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:13:02.502 AM"}
âœ… Server started successfully on port 4000
[INFO] 08:13:22 Restarting: /Users/nicholasmangubat/CascadeProjects/seodirector/backend/src/config/database.ts has been modified

--- Received SIGTERM, starting graceful shutdown ---
[32m[32minfo[32m[39m: 	[32mReceived SIGTERM, starting graceful shutdown[39m {"timestamp":"2025-06-03 08:13:22.655 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:22.656 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:22.656 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down enhanced worker...[39m {"timestamp":"2025-06-03 08:13:22.657 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker shutdown complete[39m {"timestamp":"2025-06-03 08:13:22.660 AM"}
[32m[32minfo[32m[39m: 	[32mShutting down WebSocket Gateway...[39m {"timestamp":"2025-06-03 08:13:22.660 AM"}
[32m[32minfo[32m[39m: 	[32mBroadcasted system update: System Maintenance[39m {"timestamp":"2025-06-03 08:13:22.661 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.662 AM"}
[32m[32minfo[32m[39m: 	[32mClosing Enhanced Queue Adapter...[39m {"timestamp":"2025-06-03 08:13:23.662 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Queue Adapter closed[39m {"timestamp":"2025-06-03 08:13:23.663 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.669 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System shutdown completed[39m {"timestamp":"2025-06-03 08:13:23.669 AM"}
[31m[31merror[31m[39m: 	[31mError closing HTTP server: Server is not running.[39m {"code":"ERR_SERVER_NOT_RUNNING","stack":"Error: Server is not running.\n    at Server.close (node:net:2358:12)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:530:35)\n    at emitCloseNT (node:net:2418:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-06-03 08:13:23.670 AM"}
Process exiting with code: 1
[31m[31merror[31m[39m: 	[31mProcess exiting with code: 1[39m {"timestamp":"2025-06-03 08:13:23.670 AM"}
--- Backend process starting ---
--- http imported ---
--- express imported ---
--- socket.io imported ---
--- cors imported ---
--- helmet imported ---
--- morgan imported ---
--- redis imported ---
--- Loading config.ts ---
--- Validating environment variables ---
--- Environment variables validated successfully ---
--- logger imported ---
--- errorHandler imported ---
[32m[32minfo[32m[39m: 	[32mLoaded existing RSA keys for JWT signing[39m {"timestamp":"2025-06-03 08:13:24.222 AM"}
[32m[32minfo[32m[39m: 	[32mStarting enhanced worker...[39m {"timestamp":"2025-06-03 08:13:24.829 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker started successfully[39m {"timestamp":"2025-06-03 08:13:24.829 AM"}
--- Config loaded successfully ---
--- Express app and server initialized ---
--- Initializing Redis client ---
--- Redis client initialized ---
--- Initializing Database Manager ---
--- OpenAPI spec loaded successfully ---
--- startServer: BEGIN ---
--- Attempting Redis connection ---
--- After startServer() call ---
--- Redis connected successfully ---
[32m[32minfo[32m[39m: 	[32mConnected to Redis[39m {"timestamp":"2025-06-03 08:13:24.916 AM"}
--- Attempting database connection via Database Manager ---
[32m[32minfo[32m[39m: 	[32mAttempting database connection (attempt 1/5)[39m {"connectionString":"postgresql://nicholasmangubat@localhost:5432/rival_outranker","poolSize":25,"timeout":30000,"timestamp":"2025-06-03 08:13:24.917 AM"}
Redis client connected successfully in rate-limit middleware
[32m[32minfo[32m[39m: 	[32mConnected to Redis for JWT service[39m {"timestamp":"2025-06-03 08:13:24.917 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:24.918 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase info: Starting a postgresql pool with 17 connections.[39m {"target":"quaint::pooled","timestamp":"2025-06-03 08:13:24.918 AM"}
[32m[32minfo[32m[39m: 	[32mâœ… Database connected successfully[39m {"attempt":1,"connectionPoolSize":25,"database":"rival_outranker","pgVersion":"15.13","responseTime":"0ms","timestamp":"2025-06-03 08:13:24.938 AM"}
[32m[32minfo[32m[39m: 	[32mpg_stat_statements extension enabled for query monitoring[39m {"timestamp":"2025-06-03 08:13:24.942 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase optimized for SEO analysis workloads[39m {"effectiveCacheSize":"2GB","optimizations":13,"timestamp":"2025-06-03 08:13:24.942 AM","workMem":"256MB"}
--- Database Manager connected successfully ---
[32m[32minfo[32m[39m: 	[32mInitializing Enhanced Analysis System...[39m {"timestamp":"2025-06-03 08:13:24.944 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced queue adapter...[39m {"timestamp":"2025-06-03 08:13:24.944 AM"}
[32m[32minfo[32m[39m: 	[32mQueue adapter initialized and healthy[39m {"timestamp":"2025-06-03 08:13:24.947 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing WebSocket gateway...[39m {"timestamp":"2025-06-03 08:13:24.947 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket Gateway initialized[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway initialized[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mInitializing enhanced worker...[39m {"timestamp":"2025-06-03 08:13:25.054 AM"}
[32m[32minfo[32m[39m: 	[32mWorker event handlers configured[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mWorker initialized with concurrency: 5[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mSetting up queue cleanup every 3600000ms[39m {"timestamp":"2025-06-03 08:13:25.077 AM"}
[32m[32minfo[32m[39m: 	[32mValidating system health...[39m {"timestamp":"2025-06-03 08:13:25.078 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced worker is ready to process analysis jobs[39m {"timestamp":"2025-06-03 08:13:25.088 AM"}
[32m[32minfo[32m[39m: 	[32mDatabase connectivity verified[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mWebSocket gateway health verified[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mSystem health validation completed successfully[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mEnhanced Analysis System initialized successfully[39m {"timestamp":"2025-06-03 08:13:25.090 AM"}
[32m[32minfo[32m[39m: 	[32mSystem Status:[39m {"cleanupInterval":3600000,"initialized":true,"queueMetrics":{"active":0,"averageProcessingTime":300000,"completed":0,"delayed":0,"failed":0,"paused":0,"totalProcessingTime":0,"waiting":0},"timestamp":"2025-06-03 08:13:25.091 AM","webSocketEnabled":true,"workerConcurrency":5}
[32m[32minfo[32m[39m: 	[32mAnalysis system initialized successfully[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mServer is running on port 4000[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mEnvironment: development[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
[32m[32minfo[32m[39m: 	[32mAPI Documentation: http://localhost:4000/api-docs[39m {"timestamp":"2025-06-03 08:13:25.091 AM"}
âœ… Server started successfully on port 4000
